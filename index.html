<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persyaratan Ekspor Tumbuhan</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ========================================================= */
        /* Gaya Umum dan Global */
        /* ========================================================= */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Mencegah scroll horizontal */
            min-height: 100vh; /* Memastikan body mengisi tinggi viewport */
            background-image: url('https://jnewsonline.com/wp-content/uploads/2024/09/ekspor-impor.jpg'); /* Gambar background untuk seluruh halaman */
            background-size: cover; /* Memastikan gambar menutupi seluruh area */
            background-position: center; /* Memusatkan gambar */
            background-attachment: fixed; /* Memastikan gambar tetap saat menggulir */
            background-color: transparent; /* Menghilangkan warna latar belakang body */
            position: relative; /* Diperlukan untuk penempatan global-overlay */
        }

        /* Overlay global yang menutupi seluruh halaman */
        #global-overlay {
            position: fixed; /* Tetap pada viewport saat digulir */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Lapisan hitam transparan (50% opacity) */
            z-index: 1; /* Di bawah konten utama */
        }

        /* Kontainer utama aplikasi harus di atas overlay */
        #appContainer {
            position: relative;
            z-index: 2; /* Pastikan semua konten aplikasi berada di atas global-overlay */
        }

        .hidden-page {
            display: none;
        }

        /* ========================================================= */
        /* Gaya Hero Section (Halaman Utama) */
        /* ========================================================= */
        .hero-background {
            position: relative;
            height: 100vh; /* Menggunakan tinggi penuh viewport */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Memusatkan konten secara vertikal */
            align-items: center;
            text-align: center;
            color: white;
            padding: 20px;
            z-index: 2; /* Pastikan di atas global-overlay */
        }

        /* Style untuk membuat latar belakang kartu transparan di hero section */
        .transparent-card {
            background-color: rgba(255, 255, 255, 0.2); /* Sedikit transparan */
            backdrop-filter: blur(5px); /* Efek blur untuk latar belakang */
            color: white; /* Ubah warna teks agar terlihat di atas latar belakang gelap */
        }

        /* ========================================================= */
        /* Gaya Halaman Konten (Selain Halaman Utama) */
        /* ========================================================= */
        .content-page-background {
            background-color: rgba(255, 255, 255, 0.6); /* Latar belakang putih semi-transparan, lebih transparan */
            backdrop-filter: blur(8px); /* Efek blur lebih kuat */
            min-height: calc(100vh - 100px); /* Sesuaikan tinggi agar tidak menutupi footer */
            padding-bottom: 50px; /* Tambahkan padding agar konten tidak terlalu dekat dengan footer */
            position: relative; /* Pastikan di atas global-overlay */
            z-index: 2;
        }

        /* Gaya baru untuk kartu di dalam halaman konten */
        .transparent-content-card {
            background-color: rgba(255, 255, 255, 0.7); /* Lebih solid dari hero card, tapi masih transparan */
            backdrop-filter: blur(10px); /* Efek blur yang lebih kuat untuk memisahkan dari background halaman */
        }

        /* ========================================================= */
        /* Gaya Elemen Spesifik */
        /* ========================================================= */
        .filter-active {
            background-color: #2563eb; /* Biru yang lebih gelap untuk tombol aktif */
            color: white;
        }

        .product-card-image {
            width: 100%;
            height: 120px; /* Fixed height for consistency */
            object-fit: cover; /* Cover ensures the image fills the area */
            border-radius: 8px; /* Rounded corners for the image */
            margin-bottom: 12px; /* Space below the image */
        }

        /* Custom style for dropdown button to fit within the input styling */
        .dropdown-toggle-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0 8px;
            color: #4b5563; /* text-gray-600 */
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        /* Style untuk membuat footer transparan */
        .transparent-footer {
            background-color: rgba(0, 0, 0, 0.5); /* Latar belakang footer sedikit transparan */
            color: white; /* Ubah warna teks agar terlihat di atas latar belakang gelap */
            position: relative; /* Pastikan di atas global-overlay */
            z-index: 2;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Lapisan overlay hitam transparan yang menutupi seluruh halaman -->
    <div id="global-overlay"></div>

    <!-- Kontainer utama untuk semua "halaman" -->
    <div id="appContainer">

        <!-- ========================================================= -->
        <!-- Halaman Utama (Main Page) -->
        <!-- ========================================================= -->
        <div id="mainPage">
            <header class="hero-background">
                <div class="relative z-10 flex flex-col items-center justify-center w-full max-w-4xl px-4 mx-auto">
                    <!-- Logo Lintanx dari tautan GitHub -->
                    <img src="https://raw.githubusercontent.com/cwirabayu-boop/Lintanx/refs/heads/master/Lintanx_BW.png" alt="Logo Lintanx" class="w-1/2 h-auto mx-auto mb-4">

                    <!-- Bilah Pencarian Baru -->
                    <div class="flex flex-col w-full max-w-3xl p-2 bg-white rounded-full shadow-lg md:flex-row mb-8">
                        <div class="flex items-center flex-grow px-4 py-2 border-b md:border-r md:border-b-0 border-gray-300">
                            <input type="text" id="inputNegara" placeholder="Cari Negara" class="w-full bg-transparent focus:outline-none text-gray-800 placeholder-gray-500">
                        </div>
                        <div class="flex items-center flex-grow px-4 py-2 border-b md:border-r md:border-b-0 border-gray-300">
                            <input type="text" id="inputProduk" placeholder="Cari Produk" class="w-full bg-transparent focus:outline-none text-gray-800 placeholder-gray-500">
                        </div>
                        <button id="tombolCari" class="w-full px-6 py-3 mt-2 text-white bg-green-500 rounded-full md:w-auto md:mt-0 md:ml-2 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50">Telusuri</button>
                    </div>

                    <!-- Bagian menu "Cari Berdasarkan Negara" dan "Cari Berdasarkan Produk" -->
                    <div class="w-full max-w-3xl">
                        <section class="grid grid-cols-1 gap-8 md:grid-cols-2">
                            <!-- Kartu Cari Berdasarkan Negara -->
                            <div class="p-6 rounded-lg shadow-md transparent-card">
                                <h2 class="mb-2 text-xl font-semibold">Cari Berdasarkan Negara</h2>
                                <p class="text-gray-200">Temukan persyaratan ekspor untuk negara tujuan tertentu.</p>
                                <button id="btnCariNegara" class="mt-4 w-full px-6 py-3 text-white bg-green-500 rounded-full hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50">Lihat Semua Negara &rarr;</button>
                            </div>
                            <!-- Kartu Cari Berdasarkan Produk -->
                            <div class="p-6 rounded-lg shadow-md transparent-card">
                                <h2 class="mb-2 text-xl font-semibold">Cari Berdasarkan Produk</h2>
                                <p class="text-gray-200">Lihat persyaratan spesifik untuk berbagai jenis produk tumbuhan.</p>
                                <button id="btnCariProduk" class="mt-4 w-full px-6 py-3 text-white bg-green-500 rounded-full hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50">Lihat Semua Produk &rarr;</button>
                            </div>
                        </section>
                    </div>
                </div>
            </header>
            <main class="container p-8 mx-auto">
                <!-- Bagian ini dapat digunakan untuk konten lain di masa mendatang jika diperlukan di halaman utama -->
            </main>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Negara Tujuan Ekspor -->
        <!-- ========================================================= -->
        <div id="negaraTujuanPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackNegaraTujuan" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeNegara" class="hover:underline">Home</a> &gt;
                    <span id="breadcrumbCurrentNegara" class="font-semibold">Negara Tujuan</span>
                </nav>

                <!-- Header Halaman -->
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Negara Tujuan Ekspor</h1>
                <p class="text-gray-700 mb-8">Berikut ini informasi syarat mutu dan aturan teknis ekspor berdasarkan negara.</p>

                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Filter Sidebar -->
                    <div class="w-full md:w-1/4 p-6 rounded-lg shadow-md transparent-content-card">
                        <button id="filterSemuaNegara" class="w-full text-left py-2 px-4 rounded-lg bg-blue-600 text-white font-semibold mb-2 hover:bg-blue-700 transition-colors">Semua Negara</button>
                        <ul class="space-y-1">
                            <li><a href="#" id="filterAsia" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">Asia</a></li>
                            <li><a href="#" id="filterUniEropa" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">Uni Eropa</a></li>
                            <li><a href="#" id="filterGcc" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">GCC (Arab Teluk)</a></li>
                            <li><a href="#" id="filterUee" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">UEE (Eurasia)</a></li>
                            <li><a href="#" id="filterLainnya" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">Lainnya</a></li>
                        </ul>
                    </div>

                    <!-- Daftar Negara -->
                    <div class="w-full md:w-3/4">
                        <h2 id="daftarNegaraTitle" class="text-xl font-semibold text-gray-800 mb-4">Semua Negara</h2>
                        <div id="daftarNegaraFiltrasi" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Kartu Negara akan dimuat di sini oleh JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Detail Produk Negara -->
        <!-- ========================================================= -->
        <div id="productDetailPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackProductDetail" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeProduct" class="hover:underline">Home</a> &gt;
                    <a href="#" id="breadcrumbNegaraProduct" class="hover:underline">Negara Tujuan</a> &gt;
                    <span id="breadcrumbCurrentProduct" class="font-semibold"></span>
                </nav>

                <!-- Header Halaman Detail Produk -->
                <h1 class="text-3xl font-bold text-gray-800 mb-2" id="detailPageTitle">Produk Ekspor ke Afrika Selatan</h1>
                <p class="text-gray-700 mb-8" id="detailPageSubtext"></p>

                <div id="produkContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <!-- Kartu Produk akan dimuat di sini oleh JavaScript -->
                </div>
            </div>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Persyaratan Ekspor Produk -->
        <!-- ========================================================= -->
        <div id="exportRequirementsPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackExportRequirements" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeReq" class="hover:underline">Home</a> &gt;
                    <a href="#" id="breadcrumbNegaraReq" class="hover:underline">Negara Tujuan</a> &gt;
                    <a href="#" id="breadcrumbProdukReq" class="hover:underline"></a> &gt;
                    <span id="breadcrumbCurrentReq" class="font-semibold"></span>
                </nav>

                <!-- Header Halaman Persyaratan -->
                <div class="flex items-center mb-6">
                    <h1 class="text-3xl font-bold text-gray-800" id="requirementsPageTitle">Ekspor Produk Alat Komunikasi ke Afrika Selatan</h1>
                </div>
                <p class="text-gray-700 mb-8" id="requirementsPageSubtext">Berikut ini informasi persyaratan ekspor terkait produk yang akan diekspor ke <span id="countryNameForReq"></span>.</p>
                
                <!-- Tombol NPPO -->
                <div class="mt-8 mb-8 text-center">
                    <a id="nppoLink" href="#" target="_blank" class="inline-block w-full px-6 py-3 text-white font-semibold bg-green-500 rounded-full hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-400 focus:ring-opacity-50">
                        Kunjungi Website NPPO <span id="nppoCountryName"></span> &rarr;
                    </a>
                </div>

                <div id="requirementsContent" class="text-justify">
                    <!-- Konten persyaratan akan dimuat di sini -->
                    <div class="mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800 mb-3">Regulasi Alat Telekomunikasi di Afrika Selatan</h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Regulasi telekomunikasi di Afrika Selatan adalah bidang yang sangat kompleks dan diserahkan kepada mereka yang melakukannya telah mengadopsinya sebagai spesialisasi.</li>
                            <li>Khususnya, kesadaran akan hak atau kewajiban konsumen dan pemahaman tentang kerangka peraturan untuk interkoneksi dan penyewaan fasilitas akan sangat penting dalam menegosiasikan perjanjian dan tingkat layanan untuk penyediaan layanan komunikasi elektronik.</li>
                            <li>Undang-undang utama Parlemen yang mengatur industri komunikasi elektronik di Afrika Selatan adalah Electronic Communications Act 36 tahun 2005 ("the ECA"), yang telah menggantikan Undang-Undang Telekomunikasi pada tahun 1996 ("Undang-Undang Telekomunikasi") pada 19 Juli 2006. ECA dapat dikategorikan sebagai pro kompetitif undang-undang yang sangat kontras dengan Undang-Undang Telekomunikasi, yang proteksionis dalam upaya melindungi penyedia sambungan telepon tidak bergerak/telepon rumah, Telkom SA Ltd, dari pengaruh persaingan global.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">ECA (Electronic Communications Act) mengatur berbagai jenis masalah, termasuk:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>lisensi,</li>
                            <li>akses,</li>
                            <li>hak infrastruktur,</li>
                            <li>manajemen dan penugasan frekuensi,</li>
                            <li>faktor pasar dan persaingan usaha,</li>
                            <li>layanan universal.</li>
                        </ul>
                    </div>
                    <div>
                        <p class="text-gray-700 mb-2">ECA adalah undang-undang yang mengatur antara penyiaran dan telekomunikasi khususnya di wilayah Afrika Selatan.</p>
                        <p class="text-gray-700">Undang-undang lain yang berdampak pada sektor ini meliputi:</p>
                        <!-- Anda bisa menambahkan daftar undang-undang lain di sini jika ada data -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Daftar Produk Ekspor -->
        <!-- ========================================================= -->
        <div id="exportProductListPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackExportProductList" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeProdukList" class="hover:underline">Home</a> &gt;
                    <span id="breadcrumbCurrentProdukList" class="font-semibold">Produk Ekspor</span>
                </nav>

                <!-- Header Halaman -->
                <h1 class="text-3xl font-bold text-gray-800 mb-2" id="productListPageTitle">Semua Produk Ekspor</h1>
                <p class="text-gray-700 mb-8" id="productListPageSubtext">Temukan persyaratan ekspor untuk berbagai jenis produk tumbuhan.</p>

                <div id="allProductsContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <!-- Kartu Produk akan dimuat di sini oleh JavaScript -->
                </div>
            </div>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Negara-negara Penjual Produk (Baru) -->
        <!-- ========================================================= -->
        <div id="productCountriesPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackProductCountries" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeProductCountries" class="hover:underline">Home</a> &gt;
                    <a href="#" id="breadcrumbProdukListProductCountries" class="hover:underline">Produk Ekspor</a> &gt;
                    <span id="breadcrumbCurrentProductCountries" class="font-semibold"></span>
                </nav>

                <!-- Header Halaman -->
                <h1 class="text-3xl font-bold text-gray-800 mb-2" id="productCountriesPageTitle">Negara Tujuan untuk [Nama Produk]</h1>
                <p class="text-gray-700 mb-8" id="productCountriesPageSubtext">Informasi negara tujuan ekspor.</p>

                <div id="countriesForProductContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Kartu Negara akan dimuat di sini oleh JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================================= -->
    <!-- Footer Halaman -->
    <!-- ========================================================= -->
    <footer class="py-6 mt-12 text-center transparent-footer">
        <p>&copy; 2025 Layanan Informasi Tanaman Ekspor. Hak Cipta Dilindungi.</p>
    </footer>

    <script>
        /* ========================================================= */
        /* Data Aplikasi */
        /* ========================================================= */
        const exportCountriesData = [
            { "negara": "China", "jumlah_produk": 2, "region": "Asia", "nppo_link": "http://www.moa.gov.cn/", "produk_list": [
                {"nama": "Santan Kelapa", "img": "https://wiratech.co.id/wp-content/uploads/2018/11/cara-membuat-santan-kelapa.png", "persyaratan": `
                    <div class="mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800 mb-3">Persyaratan Umum Ekspor Produk Pertanian ke China:</h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Pendaftaran GACC:</strong> Eksportir dan produsen makanan harus terdaftar di Administrasi Umum Kepabeanan Republik Rakyat Tiongkok (GACC).</li>
                            <li><strong>Memenuhi Standar Kesehatan dan Kebersihan:</strong> Produk harus memenuhi standar kesehatan dan kebersihan yang ditetapkan oleh China.</li>
                            <li><strong>Sertifikat Karantina:</strong> Memiliki sertifikat karantina tumbuhan yang dikeluarkan oleh otoritas terkait (Badan Karantina Indonesia), yang membuktikan bahwa produk bebas dari hama dan penyakit.</li>
                            <li><strong>Dokumen Ekspor:</strong> Persiapkan dokumen seperti Surat Keterangan Asal, invoice, packing list, bill of lading, dan dokumen pendukung lainnya.</li>
                            <li><strong>Labeling:</strong> Memenuhi persyaratan pelabelan yang ditetapkan oleh China.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Persyaratan Khusus untuk Santan Kelapa:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Jenis Produk:</strong> Pastikan santan kelapa termasuk dalam daftar produk yang diizinkan untuk diekspor ke China.</li>
                            <li><strong>Inspeksi CIQ:</strong> Produk akan menjalani inspeksi CIQ (China Inspection and Quarantine) untuk memastikan kepatuhan terhadap standar dan persyaratan pelabelan.</li>
                            <li><strong>Perlakuan Karantina Khusus:</strong> Jika diperlukan, produk mungkin memerlukan perlakuan karantina khusus, seperti perlakuan suhu panas atau dingin.</li>
                        </ul>
                    </div>
                `},
                {"nama": "Minyak Kelapa", "img": "https://res.cloudinary.com/dk0z4ums3/image/upload/v1641883391/attached_image/fakta-minyak-kelapa-untuk-rambut-dan-diet.jpg", "persyaratan": `
                    <div class="mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800 mb-3">Pendaftaran Eksportir dan Produk:</h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Pendaftaran GACC:</strong> Produsen, pengolah, dan fasilitas penyimpanan produk pangan yang diekspor ke China harus terdaftar di GACC.</li>
                            <li><strong>Pendaftaran Produsen Luar Negeri:</strong> Produsen makanan di luar China juga perlu mendaftar di GACC, terutama sejak berlakunya Decree 248.</li>
                            <li><strong>Informasi Produk:</strong> Pendaftaran mencakup informasi tentang produk, termasuk HS Code (10 digit) dan CIQ Code (3 digit).</li>
                            <li><strong>Dokumen Pendukung:</strong> Pendaftaran membutuhkan dokumen seperti Nomor Induk Berusaha (NIB) dan dokumen terkait kondisi sarana.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Persyaratan Kualitas dan Keamanan:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Standar Mutu:</strong> Minyak kelapa harus memenuhi standar mutu yang berlaku di China, termasuk standar GB2760-2011 untuk bahan tambahan makanan dan GB14880-2012 jika digunakan untuk meningkatkan komponen nutrisi.</li>
                            <li><strong>Kadar Air:</strong> Kadar air dalam minyak kelapa harus rendah, umumnya kurang dari 0.2%, untuk menjaga kualitas dan daya tahan produk.</li>
                            <li><strong>Asam Lemak:</strong> Kandungan asam lemak dalam minyak kelapa harus seimbang dan sesuai standar internasional.</li>
                            <li><strong>Proses Produksi:</strong> Proses produksi harus memenuhi standar kebersihan dan kualitas yang baik.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Dokumen Ekspor:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Faktur Komersial:</strong> Dokumen yang berisi informasi tentang transaksi penjualan, termasuk harga, jumlah, dan deskripsi produk.</li>
                            <li><strong>Surat Keterangan Asal (COO):</strong> Dokumen yang menyatakan asal produk, yang mungkin diperlukan untuk mendapatkan manfaat dari perjanjian perdagangan preferensial.</li>
                            <li><strong>Daftar Kemasan (Packing List):</strong> Dokumen yang mencantumkan detail kemasan produk.</li>
                            <li><strong>Pemberitahuan Ekspor Barang (PEB):</strong> Dokumen yang diperlukan untuk proses kepabeanan.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Persyaratan Tambahan:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Label Produk:</strong> Label produk harus mencantumkan informasi yang lengkap, termasuk komposisi, tanggal kedaluwarsa, dan nomor registrasi BPOM (jika ada).</li>
                            <li><strong>Pelabelan Produk:</strong> Label harus mencantumkan nomor registrasi GACC atau nomor registrasi yang disetujui oleh otoritas negara pengekspor.</li>
                            <li><strong>Bea Cukai:</strong> Pihak eksportir harus mengurus proses kepabeanan di China.</li>
                            <li><strong>Persetujuan Ekspor (PE):</strong> Untuk komoditas tertentu seperti CPO dan turunannya, diperlukan Persetujuan Ekspor (PE) yang diterbitkan oleh Kementerian Perdagangan.</li>
                        </ul>
                    </div>
                `}
            ]},
            { "negara": "Inggris", "jumlah_produk": 1, "region": "Eropa", "nppo_link": "https://www.gov.uk/government/organisations/department-for-environment-food-rural-affairs", "produk_list": [
                {"nama": "Kelapa Parut", "img": "https://www.static-src.com/wcsstore/Indraprastha/images/catalog/full//97/MTA-67010495/no-brand_kelapa-parut-1-butir_full01.jpg", "persyaratan": `
                    <div class="mb-6">
                        <p class="text-gray-700 mb-4">Berdasarkan peraturan NPPO Inggris, berikut adalah poin-poin informatif mengenai persyaratan ekspor kelapa parut ke Inggris:</p>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">1. Pengecualian Sertifikat Phytosanitary:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Kelapa parut (desiccated coconut)</strong> tidak memerlukan sertifikat phytosanitary dari otoritas karantina tumbuhan di negara asal (NPPO Indonesia).</li>
                            <li>Hal ini karena produk kelapa, baik segar maupun kering, dianggap sebagai komoditas dengan risiko rendah terhadap penyebaran hama dan penyakit tanaman.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">2. Persyaratan Utama: Keamanan Pangan & Kualitas:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Meskipun tidak memerlukan sertifikat phytosanitary, produk wajib memenuhi standar keamanan pangan dan kualitas yang ketat dari otoritas Inggris.</li>
                            <li><strong>Keamanan Pangan:</strong> Produk harus bebas dari kontaminan fisik, kimia, dan mikrobiologis (seperti salmonella, E. coli), serta residu pestisida atau logam berat.</li>
                            <li><strong>Kualitas Produk:</strong> Produk harus memenuhi standar kualitas yang ditetapkan, seperti kadar air maksimum 3%, kadar lemak (full-fat atau low-fat), dan tidak mengandung bau atau rasa asing.</li>
                            <li><strong>Labeling:</strong> Label pada kemasan harus informatif, jelas, dan sesuai dengan peraturan yang berlaku di Inggris. Jika menggunakan pengawet (misalnya sulfit), harus dicantumkan pada label karena termasuk alergen.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">3. Prosedur dan Dokumen Impor Lainnya:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Eksportir wajib mendaftar dan menggunakan sistem IPAFFS (Import of Products, Animals, Food and Feed System) untuk memberitahukan impor produk ke Inggris.</li>
                            <li>Siapkan dokumen ekspor lengkap dari Indonesia, seperti Surat Izin Perdagangan, Nomor Pokok Wajib Pajak (NPWP), dan Nota Persetujuan Ekspor (NPE) dari Bea Cukai.</li>
                            <li>Konsinyasi mungkin akan melalui pemeriksaan dokumen dan fisik secara acak di perbatasan Inggris untuk memastikan kepatuhan terhadap peraturan.</li>
                        </ul>
                    </div>
                `}
            ]},
            { "negara": "Rusia", "jumlah_produk": 1, "region": "UEE (Eurasia)", "nppo_link": "https://fsvps.gov.ru/", "produk_list": [
                {"nama": "Kelapa Parut", "img": "https://www.static-src.com/wcsstore/Indraprastha/images/catalog/full//97/MTA-67010495/no-brand_kelapa-parut-1-butir_full01.jpg", "persyaratan": `
                    <div class="mb-6">
                        <p class="text-gray-700 mb-4">Berdasarkan informasi dari NPPO (National Plant Protection Organization) Rusia, persyaratan meliputi:</p>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">1. Sertifikasi Produk:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Sertifikat Kesehatan Tumbuhan (Phytosanitary Certificate):</strong> Ini adalah dokumen utama yang membuktikan bahwa produk kelapa parut Anda bebas dari hama dan penyakit tanaman yang berbahaya, dan memenuhi standar karantina Rusia.</li>
                            <li><strong>Sertifikat Asal Usul:</strong> Dokumen ini diperlukan untuk membuktikan bahwa kelapa parut berasal dari Indonesia dan memenuhi persyaratan preferensi tarif atau aturan asal lainnya.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">2. Persyaratan Karantina:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Pengendalian Hama dan Penyakit:</strong> Kelapa parut harus melalui proses pemeriksaan dan pengobatan yang diperlukan untuk memastikan bebas dari hama dan penyakit yang menjadi perhatian Rusia.</li>
                            <li><strong>Kemasan dan Label:</strong> Kemasan harus memenuhi standar yang ditetapkan oleh Rusia untuk mencegah kontaminasi dan memudahkan proses pemeriksaan. Label harus mencantumkan informasi yang jelas dan lengkap tentang produk, termasuk asal usul, tanggal produksi, dan tanggal kedaluwarsa.</li>
                            <li><strong>Fasilitas Produksi:</strong> Fasilitas produksi kelapa parut harus memenuhi standar sanitasi dan higienis yang ditetapkan oleh Rusia untuk menjaga kualitas dan keamanan produk.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">3. Peraturan Teknis dan Standar:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>TR CU 022/2011:</strong> Regulasi teknis ini menetapkan persyaratan untuk pelabelan produk makanan, termasuk tanggal pembuatan, tanggal kedaluwarsa, dan nama produk.</li>
                            <li><strong>Pedoman Asupan Harian:</strong> Regulasi ini juga mengatur penunjukan nilai energi, protein, lemak, dan karbohidrat dalam produk makanan untuk mencegah tindakan yang menipu konsumen.</li>
                            <li><strong>Persyaratan Khusus:</strong> Rusia mungkin memiliki persyaratan khusus untuk produk kelapa parut tertentu. Penting untuk berkonsultasi dengan pihak berwenang Rusia atau perwakilan perdagangan untuk mendapatkan informasi terbaru dan terperinci.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">4. Prosedur Ekspor:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Pendaftaran:</strong> Ekspor kelapa parut memerlukan pendaftaran di instansi terkait di Indonesia, seperti Badan Karantina Indonesia.</li>
                            <li><strong>Pemeriksaan dan Sertifikasi:</strong> Kelapa parut harus melalui pemeriksaan dan sertifikasi oleh pihak berwenang untuk memastikan memenuhi persyaratan ekspor.</li>
                            <li><strong>Pengiriman:</strong> Setelah semua persyaratan terpenuhi, kelapa parut dapat dikirim ke Rusia melalui jalur yang telah ditentukan.</li>
                        </ul>
                    </div>
                `}
            ]},
            { "negara": "Vietnam", "jumlah_produk": 1, "region": "Asia", "nppo_link": "https://www.ppd.gov.vn/", "produk_list": [
                {"nama": "Pala Biji", "img": "https://asset.kompas.com/crops/IH_RV5KbajjARwnu9MUsgds412A=/0x0:1000x667/750x500/data/photo/2020/04/18/5e9b14ab5ec0a.jpg", "persyaratan": `
                    <div class="mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800 mb-3">Persyaratan Ekspor Biji Pala ke Vietnam:</h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Karantina:</strong> Biji pala yang diekspor harus melalui proses karantina untuk memastikan bebas dari hama dan penyakit tumbuhan.</li>
                            <li><strong>Sertifikat Fitosanitari:</strong> Dokumen ini dikeluarkan oleh NPPO (National Plant Protection Organization) negara asal (dalam hal ini, Indonesia) yang menyatakan bahwa produk telah diperiksa dan memenuhi persyaratan fitosanitari yang ditetapkan oleh Vietnam.</li>
                            <li><strong>Pemeriksaan Laboratorium:</strong> Sampel biji pala mungkin perlu diuji di laboratorium untuk mendeteksi keberadaan hama atau penyakit tertentu yang menjadi perhatian Vietnam.</li>
                            <li><strong>Perlakuan:</strong> Beberapa perlakuan mungkin diperlukan untuk memastikan produk bebas dari hama dan penyakit, seperti fumigasi atau perlakuan panas.</li>
                            <li><strong>Pengepakan:</strong> Biji pala harus dikemas dengan cara yang mencegah kontaminasi selama pengangkutan dan penyimpanan.</li>
                            <li><strong>Pelabelan:</strong> Kemasan harus diberi label yang jelas dan akurat, termasuk informasi tentang jenis produk, negara asal, dan informasi lain yang diperlukan.</li>
                            <li><strong>Dokumen Tambahan:</strong> Dokumen tambahan mungkin diperlukan tergantung pada persyaratan khusus yang ditetapkan oleh NPPO Vietnam untuk komoditas biji pala.</li>
                        </ul>
                    </div>
                `}
            ]},
        ];

        /* ========================================================= */
        /* Variabel DOM (Document Object Model) */
        /* ========================================================= */
        const mainPage = document.getElementById('mainPage');
        const negaraTujuanPage = document.getElementById('negaraTujuanPage');
        const productDetailPage = document.getElementById('productDetailPage');
        const exportRequirementsPage = document.getElementById('exportRequirementsPage');
        const exportProductListPage = document.getElementById('exportProductListPage');
        const productCountriesPage = document.getElementById('productCountriesPage');

        // Elemen bilah pencarian baru
        const inputNegara = document.getElementById('inputNegara');
        const inputProduk = document.getElementById('inputProduk');
        const tombolCari = document.getElementById('tombolCari');

        // Tombol navigasi utama
        const btnCariNegara = document.getElementById('btnCariNegara');
        const btnCariProduk = document.getElementById('btnCariProduk');

        // Elemen Breadcrumbs
        const breadcrumbHomeNegara = document.getElementById('breadcrumbHomeNegara');
        const breadcrumbHomeProduct = document.getElementById('breadcrumbHomeProduct');
        const breadcrumbNegaraProduct = document.getElementById('breadcrumbNegaraProduct');
        const breadcrumbHomeReq = document.getElementById('breadcrumbHomeReq');
        const breadcrumbNegaraReq = document.getElementById('breadcrumbNegaraReq');
        const breadcrumbProdukReq = document.getElementById('breadcrumbProdukReq');
        const breadcrumbCurrentReq = document.getElementById('breadcrumbCurrentReq');
        const breadcrumbHomeProdukList = document.getElementById('breadcrumbHomeProdukList');
        const breadcrumbHomeProductCountries = document.getElementById('breadcrumbHomeProductCountries');
        const breadcrumbProdukListProductCountries = document.getElementById('breadcrumbProdukListProductCountries');
        const breadcrumbCurrentProductCountries = document.getElementById('breadcrumbCurrentProductCountries');

        // Elemen Halaman Negara Tujuan
        const filterSemuaNegara = document.getElementById('filterSemuaNegara');
        const filterAsia = document.getElementById('filterAsia');
        const filterUniEropa = document.getElementById('filterUniEropa');
        const filterGcc = document.getElementById('filterGcc');
        const filterUee = document.getElementById('filterUee');
        const filterLainnya = document.getElementById('filterLainnya');
        const daftarNegaraFiltrasi = document.getElementById('daftarNegaraFiltrasi');
        const daftarNegaraTitle = document.getElementById('daftarNegaraTitle');

        // Elemen Halaman Detail Produk Negara
        const detailPageTitle = document.getElementById('detailPageTitle');
        const detailPageSubtext = document.getElementById('detailPageSubtext');
        const produkContainer = document.getElementById('produkContainer');

        // Elemen Halaman Persyaratan Ekspor Produk
        const requirementsPageTitle = document.getElementById('requirementsPageTitle');
        const requirementsPageSubtext = document.getElementById('requirementsPageSubtext');
        const requirementsContent = document.getElementById('requirementsContent');
        const nppoLink = document.getElementById('nppoLink');
        const nppoCountryName = document.getElementById('nppoCountryName');
        const countryNameForReq = document.getElementById('countryNameForReq');

        // Elemen Halaman Daftar Produk Ekspor
        const productListPageTitle = document.getElementById('productListPageTitle');
        const productListPageSubtext = document.getElementById('productListPageSubtext');
        const allProductsContainer = document.getElementById('allProductsContainer');

        // Elemen Halaman Negara-negara Penjual Produk
        const productCountriesPageTitle = document.getElementById('productCountriesPageTitle');
        const productCountriesPageSubtext = document.getElementById('productCountriesPageSubtext');
        const countriesForProductContainer = document.getElementById('countriesForProductContainer');

        // New Back Buttons
        const btnBackNegaraTujuan = document.getElementById('btnBackNegaraTujuan');
        const btnBackProductDetail = document.getElementById('btnBackProductDetail');
        const btnBackExportRequirements = document.getElementById('btnBackExportRequirements');
        const btnBackExportProductList = document.getElementById('btnBackExportProductList');
        const btnBackProductCountries = document.getElementById('btnBackProductCountries');

        /* ========================================================= */
        /* Variabel State (Penyimpanan Data Sementara) */
        /* ========================================================= */
        let selectedCountryData = null; // Menyimpan data negara yang dipilih
        let selectedProductForCountriesPage = null; // Menyimpan data produk yang dipilih untuk halaman negara-negara penjual produk
        let selectedProductForRequirements = null; // Menyimpan data produk yang dipilih untuk halaman persyaratan
        let lastPageBeforeRequirements = { id: '', data: null }; // Melacak halaman sebelumnya sebelum masuk ke halaman Persyaratan

        /* ========================================================= */
        /* Fungsi Pembantu */
        /* ========================================================= */

        // Data lengkap untuk semua produk unik (untuk halaman daftar produk ekspor)
        const allUniqueProductsData = (() => {
            const productsMap = new Map();
            exportCountriesData.forEach(country => {
                country.produk_list.forEach(product => {
                    if (!productsMap.has(product.nama)) {
                        productsMap.set(product.nama, {
                            nama: product.nama,
                            img: product.img,
                            countries_exporting: new Set()
                        });
                    }
                    productsMap.get(product.nama).countries_exporting.add(country.negara);
                });
            });
            const uniqueProductsArray = Array.from(productsMap.values()).map(product => ({
                ...product,
                countries_exporting_count: product.countries_exporting.size,
                countries_exporting_list: Array.from(product.countries_exporting).sort()
            }));
            return uniqueProductsArray.sort((a, b) => a.nama.localeCompare(b.nama));
        })();

        // Fungsi untuk mendapatkan URL gambar bendera berdasarkan nama negara
        function getCountryImage(countryName) {
            if (countryName === 'China') {
                return 'https://media.istockphoto.com/id/878587072/id/foto/bendera-china-serangkaian-flags-of-the-world.jpg?s=612x612&w=0&k=20&c=2lwE1kiuR1ymTWIwLBNHvqk76Xqp2gIaHnRSSX6fiTc=';
            } else if (countryName === 'Inggris') {
                return 'https://media.istockphoto.com/id/1176177881/id/video/bendera-britania-raya.jpg?s=640x640&k=20&c=FxeS-XXTBA05EonmeuM8bZHIP25O4QAyYN04ew5eE8s=';
            } else if (countryName === 'Rusia') {
                return 'https://media.istockphoto.com/id/489481953/id/foto/bendera-rusia.jpg?s=612x612&w=0&k=20&c=yfQXzJ6yj90V47u4jCm08C7kzOz2zaCdhZsFt8OhgZ8=';
            } else if (countryName === 'Vietnam') {
                return 'https://media.istockphoto.com/id/1398462062/id/vektor/bendera-vietnam.jpg?s=612x612&w=0&k=20&c=DXt0P-FCU2XIXxaZjDEQl5tIDKdNLYFTGWpxr-HRDVM=';
            }
            else {
                const countryCode = countryName.substring(0, 2).toUpperCase();
                return `https://placehold.co/150x120/CCCCCC/666666?text=${countryCode}`;
            }
        }

        // Fungsi untuk menyembunyikan semua halaman
        function _hideAllPages() {
            mainPage.classList.add('hidden-page');
            negaraTujuanPage.classList.add('hidden-page');
            productDetailPage.classList.add('hidden-page');
            exportRequirementsPage.classList.add('hidden-page');
            exportProductListPage.classList.add('hidden-page');
            productCountriesPage.classList.add('hidden-page');
        }

        // Fungsi untuk menampilkan pesan error kustom (menggantikan alert)
        function showCustomErrorMessage(message) {
            const appContainer = document.getElementById('appContainer');
            const messageBox = document.createElement('div');
            messageBox.className = 'fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative z-50 transition-all duration-300 transform scale-0 opacity-0';
            messageBox.innerHTML = `<strong>Error!</strong><span class="block sm:inline"> ${message}</span>`;
            appContainer.appendChild(messageBox);

            // Animate in
            setTimeout(() => {
                messageBox.classList.remove('scale-0', 'opacity-0');
                messageBox.classList.add('scale-100', 'opacity-100');
            }, 10); // Small delay to allow render

            // Animate out and remove after 3 seconds
            setTimeout(() => {
                messageBox.classList.remove('scale-100', 'opacity-100');
                messageBox.classList.add('scale-0', 'opacity-0');
                setTimeout(() => messageBox.remove(), 300); // Remove after transition
            }, 3000);
        }

        /* ========================================================= */
        /* Fungsi Navigasi Halaman */
        /* ========================================================= */

        // Menampilkan halaman utama dan menyembunyikan halaman lainnya
        function showMainPage() {
            _hideAllPages();
            mainPage.classList.remove('hidden-page');
            // Reset search inputs when returning to main page
            if (inputNegara) inputNegara.value = '';
            if (inputProduk) inputProduk.value = '';
        }

        // Menampilkan halaman negara tujuan dan menyembunyikan halaman lainnya
        // Menerima optional parameter `countriesToFilter` untuk menampilkan hasil filter
        function showNegaraTujuanPage(countriesToFilter = null) {
            _hideAllPages();
            negaraTujuanPage.classList.remove('hidden-page');

            const countries = countriesToFilter || exportCountriesData;
            filterAndRenderCountries('Semua Negara', countries); // Panggil dengan data yang difilter atau semua data
        }

        // Menampilkan halaman detail produk untuk negara tertentu
        function showProductDetailPage(countryName) {
            _hideAllPages();
            productDetailPage.classList.remove('hidden-page');

            selectedCountryData = exportCountriesData.find(country => country.negara === countryName);

            if (selectedCountryData) {
                detailPageTitle.textContent = `Produk Ekspor ke ${selectedCountryData.negara}`;
                detailPageSubtext.textContent = ``;
                breadcrumbCurrentProduct.textContent = selectedCountryData.negara;
                renderProducts(selectedCountryData.produk_list, selectedCountryData.negara);
            } else {
                console.error("Data negara atau produk tidak ditemukan:", countryName);
                showCustomErrorMessage(`Negara "${countryName}" tidak ditemukan.`);
                showMainPage(); // Kembali ke halaman utama jika data tidak ditemukan
            }
        }

        // Menampilkan halaman daftar semua produk ekspor
        // Menerima optional parameter `productsToFilter` untuk menampilkan hasil filter
        function showExportProductListPage(productsToFilter = null) {
            _hideAllPages();
            exportProductListPage.classList.remove('hidden-page');

            const products = productsToFilter || allUniqueProductsData;

            productListPageTitle.textContent = productsToFilter ? `Hasil Pencarian Produk` : "Semua Produk Ekspor";
            productListPageSubtext.textContent = productsToFilter ? `Menampilkan ${products.length} hasil.` : "Temukan persyaratan ekspor untuk berbagai jenis produk tumbuhan.";

            renderAllProducts(products);
        }

        // Menampilkan halaman negara-negara penjual produk tertentu
        function showProductCountriesPage(productName) {
            _hideAllPages();
            productCountriesPage.classList.remove('hidden-page');

            selectedProductForCountriesPage = allUniqueProductsData.find(p => p.nama === productName);

            if (selectedProductForCountriesPage) {
                productCountriesPageTitle.textContent = `Negara Tujuan untuk ${selectedProductForCountriesPage.nama}`;
                productCountriesPageSubtext.textContent = `Informasi negara tujuan ekspor.`;
                breadcrumbCurrentProductCountries.textContent = selectedProductForCountriesPage.nama;

                renderCountriesForProduct(selectedProductForCountriesPage.countries_exporting_list, selectedProductForCountriesPage.nama);
            } else {
                console.error("Data produk tidak ditemukan:", productName);
                showCustomErrorMessage(`Produk "${productName}" tidak ditemukan.`);
                showExportProductListPage(); // Kembali ke daftar semua produk jika tidak ditemukan
            }
        }

        // Menampilkan halaman persyaratan ekspor untuk produk dan negara spesifik
        function showExportRequirementsPage(countryName, productName, sourcePageId = '', sourcePageData = null) {
            _hideAllPages();
            exportRequirementsPage.classList.remove('hidden-page');

            const country = exportCountriesData.find(c => c.negara === countryName);
            const product = country ? country.produk_list.find(p => p.nama === productName) : null;

            if (country && product) {
                selectedProductForRequirements = product;
                selectedCountryData = country;

                // Set lastPageBeforeRequirements based on how we arrived here
                lastPageBeforeRequirements = { id: sourcePageId, data: sourcePageData };

                requirementsPageTitle.textContent = `Ekspor Produk ${product.nama} ke ${country.negara}`;
                requirementsPageSubtext.innerHTML = `Berikut ini informasi persyaratan ekspor terkait produk yang akan diekspor ke <span id="countryNameForReq">${country.negara}</span>.`;

                requirementsContent.innerHTML = product.persyaratan || '<p class="text-gray-600">Tidak ada persyaratan spesifik yang tersedia untuk produk ini.</p>';

                if (country.nppo_link) {
                    nppoLink.href = country.nppo_link;
                    nppoCountryName.textContent = country.negara;
                    nppoLink.classList.remove('hidden');
                } else {
                    nppoLink.href = "#";
                    nppoCountryName.textContent = "";
                    nppoLink.classList.add('hidden');
                }

                breadcrumbProdukReq.textContent = productName;
                breadcrumbNegaraReq.textContent = country.negara;
                breadcrumbCurrentReq.textContent = `Persyaratan`;
            } else {
                console.error("Data negara atau produk tidak ditemukan:", countryName, productName);
                showCustomErrorMessage(`Informasi persyaratan untuk "${productName}" ke "${countryName}" tidak ditemukan.`);
                if (selectedCountryData) {
                    showProductDetailPage(selectedCountryData.negara);
                } else {
                    showMainPage();
                }
            }
        }

        /* ========================================================= */
        /* Fungsi Render Konten Dinamis */
        /* ========================================================= */

        // Merender (menampilkan) kartu negara
        function renderCountries(countriesToDisplay, title) {
            daftarNegaraFiltrasi.innerHTML = '';
            daftarNegaraTitle.textContent = title;

            if (countriesToDisplay.length === 0) {
                daftarNegaraFiltrasi.innerHTML = '<p class="text-gray-600 col-span-full">Tidak ada negara yang ditemukan untuk wilayah ini.</p>';
                return;
            }

            countriesToDisplay.forEach(country => {
                const countryImage = getCountryImage(country.negara);
                const countryCard = document.createElement('div');
                countryCard.className = 'p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden transparent-content-card';
                countryCard.innerHTML = `
                    <img src="${countryImage}" alt="Gambar untuk ${country.negara}" class="product-card-image">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-gray-800 mb-1">${country.negara}</h3>
                    </div>
                `;
                countryCard.addEventListener('click', () => {
                    showProductDetailPage(country.negara);
                });
                daftarNegaraFiltrasi.appendChild(countryCard);
            });
        }

        // Merender (menampilkan) kartu produk (di halaman Detail Produk Negara)
        function renderProducts(productsToDisplay, countryName) {
            produkContainer.innerHTML = '';

            if (productsToDisplay.length === 0) {
                produkContainer.innerHTML = '<p class="text-gray-600 col-span-full">Tidak ada produk yang ditemukan untuk negara ini.</p>';
                return;
            }

            productsToDisplay.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden transparent-content-card';
                productCard.innerHTML = `
                    <img src="${product.img}" alt="${product.nama}" class="product-card-image">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-gray-800 mb-1">${product.nama}</h3>
                        <a href="#" class="text-sm text-blue-600 hover:underline mt-2 block product-link"
                           data-country="${countryName}" data-product="${product.nama}">Informasi Lebih Lanjut ></a>
                    </div>
                `;
                produkContainer.appendChild(productCard);
            });

            document.querySelectorAll('.product-link').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const country = event.target.dataset.country;
                    const product = event.target.dataset.product;
                    // Pass the current page context to showExportRequirementsPage
                    showExportRequirementsPage(country, product, 'productDetailPage', country);
                });
            });
        }

        // Merender (menampilkan) semua kartu produk unik (di halaman Daftar Produk Ekspor)
        function renderAllProducts(productsToDisplay) {
            allProductsContainer.innerHTML = '';

            if (productsToDisplay.length === 0) {
                allProductsContainer.innerHTML = '<p class="text-gray-600 col-span-full">Tidak ada produk yang ditemukan.</p>';
                return;
            }

            productsToDisplay.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden transparent-content-card';
                productCard.innerHTML = `
                    <img src="${product.img}" alt="${product.nama}" class="product-card-image">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-gray-800 mb-1">${product.nama}</h3>
                        <a href="#" class="text-sm text-blue-600 hover:underline mt-2 block product-list-link"
                           data-product="${product.nama}">Lihat Negara Tujuan ></a>
                    </div>
                `;
                allProductsContainer.appendChild(productCard);
            });

            document.querySelectorAll('.product-list-link').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const productName = event.target.dataset.product;
                    showProductCountriesPage(productName);
                });
            });
        }

        // Merender (menampilkan) kartu negara untuk produk tertentu
        function renderCountriesForProduct(countryNames, productName) {
            countriesForProductContainer.innerHTML = '';

            if (countryNames.length === 0) {
                countriesForProductContainer.innerHTML = `<p class="text-gray-600 col-span-full">Tidak ada negara yang mengekspor produk ${productName}.</p>`;
                return;
            }

            countryNames.forEach(countryName => {
                const countryImage = getCountryImage(countryName);
                const countryCard = document.createElement('div');
                countryCard.className = 'p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden transparent-content-card';
                countryCard.innerHTML = `
                    <img src="${countryImage}" alt="Gambar untuk ${countryName}" class="product-card-image">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-gray-800 mb-1">${countryName}</h3>
                    </div>
                `;
                countryCard.addEventListener('click', () => {
                    // Pass the current page context to showExportRequirementsPage
                    showExportRequirementsPage(countryName, productName, 'productCountriesPage', productName);
                });
                countriesForProductContainer.appendChild(countryCard);
            });
        }

        // Memfilter dan merender negara berdasarkan wilayah
        // Menerima optional parameter `dataToUse` untuk memfilter dari data yang spesifik
        function filterAndRenderCountries(region, dataToUse = exportCountriesData) {
            let filteredCountries = [];
            let displayTitle = '';

            document.querySelectorAll('#negaraTujuanPage button, #negaraTujuanPage ul a').forEach(el => {
                el.classList.remove('filter-active', 'bg-blue-600', 'text-white', 'font-semibold');
                if (el.tagName === 'A') {
                    el.classList.add('text-gray-700');
                    el.classList.remove('hover:bg-blue-600');
                    el.classList.add('hover:bg-gray-100');
                }
            });

            if (region === 'Semua Negara') {
                filteredCountries = dataToUse;
                displayTitle = 'Semua Negara';
                filterSemuaNegara.classList.add('filter-active', 'bg-blue-600', 'text-white', 'font-semibold');
            } else {
                if (region === 'Lainnya') {
                    const knownRegions = ['Asia', 'Uni Eropa', 'GCC (Arab Teluk)', 'UEE (Eurasia)', 'Amerika Utara', 'Amerika Selatan', 'Afrika', 'Eropa'];
                    filteredCountries = dataToUse.filter(country => !knownRegions.includes(country.region));
                } else {
                    filteredCountries = dataToUse.filter(country => country.region === region);
                }
                displayTitle = `Negara di ${region}`;

                const activeFilterElement = document.getElementById(`filter${region.replace(/ /g, '').replace(/\(.*\)/, '')}`);
                if (activeFilterElement) {
                    activeFilterElement.classList.add('filter-active', 'bg-blue-600', 'text-white', 'font-semibold');
                    activeFilterElement.classList.remove('text-gray-700', 'hover:bg-gray-100');
                    activeFilterElement.classList.add('hover:bg-blue-700');
                }
            }
            renderCountries(filteredCountries, displayTitle);
        }

        // Fungsi untuk melakukan pencarian dari bilah pencarian utama
        function lakukanPencarian() {
            const negaraCari = inputNegara.value.toLowerCase().trim();
            const produkCari = inputProduk.value.toLowerCase().trim();

            if (negaraCari && produkCari) {
                // Keduanya dicari
                let combinedCountries = exportCountriesData.filter(country =>
                    country.negara.toLowerCase().includes(negaraCari)
                ).map(country => {
                    const matchedProducts = country.produk_list.filter(product =>
                        product.nama.toLowerCase().includes(produkCari)
                    );
                    return {
                        ...country,
                        produk_list: matchedProducts
                    };
                }).filter(country => country.produk_list.length > 0);

                if (combinedCountries.length > 0) {
                    // Jika ada hasil, tampilkan di halaman negara dan produk
                    // Untuk saat ini, kita akan menampilkan negara yang cocok terlebih dahulu
                    showNegaraTujuanPage(combinedCountries);
                    // showExportProductListPage() with filtered products based on combinedCountries
                    let productsFromCombined = [];
                    combinedCountries.forEach(country => {
                        productsFromCombined = productsFromCombined.concat(country.produk_list);
                    });
                    showExportProductListPage(productsFromCombined);
                } else {
                    showCustomErrorMessage('Tidak ada negara atau produk yang cocok dengan kriteria pencarian Anda.');
                    showMainPage();
                }

            } else if (negaraCari) {
                // Hanya negara yang dicari
                let filteredCountries = exportCountriesData.filter(country =>
                    country.negara.toLowerCase().includes(negaraCari)
                );
                if (filteredCountries.length > 0) {
                    showNegaraTujuanPage(filteredCountries);
                } else {
                    showCustomErrorMessage('Tidak ada negara yang cocok dengan kriteria pencarian Anda.');
                    showMainPage();
                }

            } else if (produkCari) {
                // Hanya produk yang dicari
                let filteredProducts = allUniqueProductsData.filter(product =>
                    product.nama.toLowerCase().includes(produkCari)
                );
                if (filteredProducts.length > 0) {
                    showExportProductListPage(filteredProducts);
                } else {
                    showCustomErrorMessage('Tidak ada produk yang cocok dengan kriteria pencarian Anda.');
                    showMainPage();
                }
            } else {
                // Jika tidak ada input pencarian, kembali ke halaman utama
                showMainPage();
            }
        }

        /* ========================================================= */
        /* Event Listeners */
        /* ========================================================= */

        // Event listener untuk tombol cari di bilah pencarian utama
        if (tombolCari) {
            tombolCari.addEventListener('click', lakukanPencarian);
        }
        if (inputNegara) {
            inputNegara.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    lakukanPencarian();
                }
            });
        }
        if (inputProduk) {
            inputProduk.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    lakukanPencarian();
                }
            });
        }

        // Navigasi utama (tombol "Lihat Semua Negara" dan "Lihat Semua Produk")
        if (btnCariNegara) {
            btnCariNegara.addEventListener('click', () => {
                showNegaraTujuanPage(); // Panggil tanpa filter untuk menampilkan semua negara
            });
        }
        if (btnCariProduk) {
            btnCariProduk.addEventListener('click', () => {
                showExportProductListPage(); // Panggil tanpa filter untuk menampilkan semua produk
            });
        }

        // Breadcrumbs
        if (breadcrumbHomeNegara) {
            breadcrumbHomeNegara.addEventListener('click', (event) => { event.preventDefault(); showMainPage(); });
        }
        if (breadcrumbHomeProduct) {
            breadcrumbHomeProduct.addEventListener('click', (event) => { event.preventDefault(); showMainPage(); });
        }
        if (breadcrumbNegaraProduct) {
            breadcrumbNegaraProduct.addEventListener('click', (event) => { event.preventDefault(); showNegaraTujuanPage(); });
        }
        if (breadcrumbHomeReq) {
            breadcrumbHomeReq.addEventListener('click', (event) => { event.preventDefault(); showMainPage(); });
        }
        if (breadcrumbNegaraReq) {
            breadcrumbNegaraReq.addEventListener('click', (event) => { event.preventDefault(); showNegaraTujuanPage(); });
        }
        if (breadcrumbProdukReq) {
            breadcrumbProdukReq.addEventListener('click', (event) => {
                event.preventDefault();
                // Navigasi kembali tergantung dari mana datangnya (Negara Detail atau Produk Countries)
                if (lastPageBeforeRequirements.id === 'productDetailPage' && lastPageBeforeRequirements.data) {
                    showProductDetailPage(lastPageBeforeRequirements.data);
                } else if (lastPageBeforeRequirements.id === 'productCountriesPage' && lastPageBeforeRequirements.data) {
                    showProductCountriesPage(lastPageBeforeRequirements.data);
                } else {
                    showMainPage(); // Fallback
                }
            });
        }
        if (breadcrumbHomeProdukList) {
            breadcrumbHomeProdukList.addEventListener('click', (event) => { event.preventDefault(); showMainPage(); });
        }
        if (breadcrumbHomeProductCountries) {
            breadcrumbHomeProductCountries.addEventListener('click', (event) => { event.preventDefault(); showMainPage(); });
        }
        if (breadcrumbProdukListProductCountries) {
            breadcrumbProdukListProductCountries.addEventListener('click', (event) => { event.preventDefault(); showExportProductListPage(); });
        }

        // Filter wilayah
        if (filterSemuaNegara) filterSemuaNegara.addEventListener('click', (event) => { event.preventDefault(); filterAndRenderCountries('Semua Negara'); });
        if (filterAsia) filterAsia.addEventListener('click', (event) => { event.preventDefault(); filterAndRenderCountries('Asia'); });
        if (filterUniEropa) filterUniEropa.addEventListener('click', (event) => { event.preventDefault(); filterAndRenderCountries('Uni Eropa'); });
        if (filterGcc) filterGcc.addEventListener('click', (event) => { event.preventDefault(); filterAndRenderCountries('GCC (Arab Teluk)'); });
        if (filterUee) filterUee.addEventListener('click', (event) => { event.preventDefault(); filterAndRenderCountries('UEE (Eurasia)'); });
        if (filterLainnya) filterLainnya.addEventListener('click', (event) => { event.preventDefault(); filterAndRenderCountries('Lainnya'); });

        // Back Buttons
        if (btnBackNegaraTujuan) {
            btnBackNegaraTujuan.addEventListener('click', () => {
                showMainPage();
            });
        }
        if (btnBackProductDetail) {
            btnBackProductDetail.addEventListener('click', () => {
                showNegaraTujuanPage();
            });
        }
        if (btnBackExportRequirements) {
            btnBackExportRequirements.addEventListener('click', () => {
                // Periksa dari mana datangnya halaman persyaratan
                if (lastPageBeforeRequirements.id === 'productDetailPage' && lastPageBeforeRequirements.data) {
                    showProductDetailPage(lastPageBeforeRequirements.data);
                } else if (lastPageBeforeRequirements.id === 'productCountriesPage' && lastPageBeforeRequirements.data) {
                    showProductCountriesPage(lastPageBeforeRequirements.data);
                } else {
                    showMainPage(); // Fallback jika tidak ada konteks
                }
            });
        }
        if (btnBackExportProductList) {
            btnBackExportProductList.addEventListener('click', () => {
                showMainPage();
            });
        }
        if (btnBackProductCountries) {
            btnBackProductCountries.addEventListener('click', () => {
                showExportProductListPage();
            });
        }

        /* ========================================================= */
        /* Inisialisasi Aplikasi */
        /* ========================================================= */
        document.addEventListener('DOMContentLoaded', showMainPage);
    </script>
</body>
</html>
