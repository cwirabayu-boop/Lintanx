<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lintanx. Layanan Informasi Tumbuhan Ekspor</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ========================================================= */
        /* Gaya Umum dan Global */
        /* ========================================================= */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Mencegah scroll horizontal */
            min-height: 100vh; /* Memastikan body mengisi tinggi viewport */
            background-image: url('https://jnewsonline.com/wp-content/uploads/2024/09/ekspor-impor.jpg'); /* Gambar background untuk seluruh halaman */
            background-size: cover; /* Memastikan gambar menutupi seluruh area */
            background-position: center; /* Memusatkan gambar */
            background-attachment: fixed; /* Memastikan gambar tetap saat menggulir */
            background-color: transparent; /* Menghilangkan warna latar belakang body */
            position: relative; /* Diperlukan untuk penempatan global-overlay */
        }

        /* Overlay global yang menutupi seluruh halaman */
        #global-overlay {
            position: fixed; /* Tetap pada viewport saat digulir */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Lapisan hitam transparan (50% opacity) */
            z-index: 1; /* Di bawah konten utama */
        }

        /* Kontainer utama aplikasi harus di atas overlay */
        #appContainer {
            position: relative;
            z-index: 2; /* Pastikan semua konten aplikasi berada di atas global-overlay */
        }

        .hidden-page {
            display: none;
        }

        /* ========================================================= */
        /* Gaya Hero Section (Halaman Utama) */
        /* ========================================================= */
        .hero-background {
            position: relative;
            height: 100vh; /* Menggunakan tinggi penuh viewport */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Memusatkan konten secara vertikal */
            align-items: center;
            text-align: center;
            color: white;
            padding: 20px;
            z-index: 2; /* Pastikan di atas global-overlay */
        }

        /* Style untuk membuat latar belakang kartu transparan di hero section */
        .transparent-card {
            background-color: rgba(255, 255, 255, 0.2); /* Sedikit transparan */
            backdrop-filter: blur(5px); /* Efek blur untuk latar belakang */
            color: white; /* Ubah warna teks agar terlihat di atas latar belakang gelap */
        }

        /* ========================================================= */
        /* Gaya Halaman Konten (Selain Halaman Utama) */
        /* ========================================================= */
        .content-page-background {
            background-color: rgba(255, 255, 255, 0.6); /* Latar belakang putih semi-transparan, lebih transparan */
            backdrop-filter: blur(8px); /* Efek blur lebih kuat */
            min-height: calc(100vh - 100px); /* Sesuaikan tinggi agar tidak menutupi footer */
            padding-bottom: 50px; /* Tambahkan padding agar konten tidak terlalu dekat dengan footer */
            position: relative; /* Pastikan di atas global-overlay */
            z-index: 2;
        }

        /* Gaya baru untuk kartu di dalam halaman konten */
        .transparent-content-card {
            background-color: rgba(255, 255, 255, 0.7); /* Lebih solid dari hero card, tapi masih transparan */
            backdrop-filter: blur(10px); /* Efek blur yang lebih kuat untuk memisahkan dari background halaman */
        }

        /* ========================================================= */
        /* Gaya Elemen Spesifik */
        /* ========================================================= */
        .filter-active {
            background-color: #2563eb; /* Biru yang lebih gelap untuk tombol aktif */
            color: white;
        }

        .product-card-image {
            width: 100%;
            height: 120px; /* Fixed height for consistency */
            object-fit: cover; /* Cover ensures the image fills the area */
            border-radius: 8px; /* Rounded corners for the image */
            margin-bottom: 12px; /* Space below the image */
        }

        /* Custom style for dropdown button to fit within the input styling */
        .dropdown-toggle-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0 8px;
            color: #4b5563; /* text-gray-600 */
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        /* Style untuk membuat footer transparan */
        .transparent-footer {
            background-color: rgba(0, 0, 0, 0.5); /* Latar belakang footer sedikit transparan */
            color: white; /* Ubah warna teks agar terlihat di atas latar belakang gelap */
            position: relative; /* Pastikan di atas global-overlay */
            z-index: 2;
        }

        /* Gaya baru untuk bilah pencarian agar seragam dengan kartu transparent-card */
        .search-bar-card {
            background-color: rgba(255, 255, 255, 0.2); /* Sama dengan transparent-card */
            backdrop-filter: blur(5px); /* Sama dengan transparent-card */
            color: white; /* Pastikan teks di dalamnya juga putih */
        }
        .search-bar-card input {
            color: white; /* Warna teks input agar terlihat di latar belakang transparan */
            background-color: transparent; /* Pastikan background input juga transparan */
        }
        .search-bar-card input::placeholder {
            color: rgba(255, 255, 255, 0.7); /* Warna placeholder yang sedikit transparan */
        }
        .search-bar-card .border-gray-300 {
            border-color: rgba(255, 255, 255, 0.4); /* Warna border yang lebih terang dan transparan */
        }

        /* Gaya untuk kartu notifikasi pencarian tidak ditemukan */
        #noResultsCard {
            position: absolute;
            top: 25%; /* Posisikan sedikit di bawah tengah */
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%; /* Lebar responsif */
            max-width: 400px; /* Lebar maksimum */
            background-color: rgba(255, 255, 255, 0.9); /* Latar belakang putih semi-transparan */
            backdrop-filter: blur(8px);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
            color: #333;
            z-index: 10; /* Pastikan di atas konten lain */
            opacity: 0; /* Mulai tersembunyi */
            transition: opacity 0.5s ease-in-out; /* Animasi fade */
            pointer-events: none; /* Tidak bisa diklik saat tersembunyi */
        }
        #noResultsCard.visible {
            opacity: 1; /* Tampilkan */
            pointer-events: auto; /* Bisa diklik saat terlihat */
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Lapisan overlay hitam transparan yang menutupi seluruh halaman -->
    <div id="global-overlay"></div>

    <!-- Kontainer utama untuk semua "halaman" -->
    <div id="appContainer">

        <!-- ========================================================= -->
        <!-- Halaman Utama (Main Page) -->
        <!-- ========================================================= -->
        <div id="mainPage">
            <header class="hero-background">
                <div class="relative z-10 flex flex-col items-center justify-center w-full max-w-4xl px-4 mx-auto">
                    <!-- Logo Lintanx dari tautan GitHub -->
                    <img src="https://raw.githubusercontent.com/cwirabayu-boop/Lintanx/refs/heads/master/2.png" alt="Logo Lintanx" class="w-1/2 h-auto mx-auto mb-4">

                    <!-- Bilah Pencarian Baru -->
                    <div class="flex flex-col w-full max-w-3xl p-4 rounded-lg shadow-lg mb-8 search-bar-card">
                        <div class="flex items-center w-full mb-3">
                            <input type="text" id="inputPencarianGabungan" placeholder="Cari Negara/Produk Anda Disini" class="w-full px-4 py-2 rounded-lg focus:outline-none">
                        </div>
                        <button id="tombolCari" class="w-full px-6 py-3 text-white bg-green-500 rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50">Telusuri</button>
                    </div>

                    <!-- Kartu Notifikasi Pencarian Tidak Ditemukan -->
                    <div id="noResultsCard" class="hidden">
                        <h2 class="text-xl font-semibold mb-2">Maaf, data yang Anda minta belum tersedia</h2>
                        <p class="text-gray-700">Silakan coba pencarian lain.</p>
                    </div>

                    <!-- Bagian menu "Cari Berdasarkan Negara" dan "Cari Berdasarkan Produk" -->
                    <div class="w-full max-w-3xl mt-8">
                        <section class="grid grid-cols-1 gap-8 md:grid-cols-2">
                            <!-- Kartu Cari Berdasarkan Negara -->
                            <div class="p-6 rounded-lg shadow-md transparent-card">
                                <h2 class="mb-2 text-xl font-semibold">Cari Berdasarkan Negara</h2>
                                <p class="text-gray-200">Temukan persyaratan ekspor untuk negara tujuan tertentu.</p>
                                <button id="btnCariNegara" class="mt-4 w-full px-6 py-3 text-white bg-green-500 rounded-full hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50">Lihat Semua Negara &rarr;</button>
                            </div>
                            <!-- Kartu Cari Berdasarkan Produk -->
                            <div class="p-6 rounded-lg shadow-md transparent-card">
                                <h2 class="mb-2 text-xl font-semibold">Cari Berdasarkan Produk</h2>
                                <p class="text-gray-200">Lihat persyaratan spesifik untuk berbagai jenis produk tumbuhan.</p>
                                <button id="btnCariProduk" class="mt-4 w-full px-6 py-3 text-white bg-green-500 rounded-full hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50">Lihat Semua Produk &rarr;</button>
                            </div>
                        </section>
                    </div>
                </div>
            </header>
            <main class="container p-8 mx-auto">
                <!-- Bagian ini dapat digunakan untuk konten lain di masa mendatang jika diperlukan di halaman utama -->
            </main>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Negara Tujuan Ekspor -->
        <!-- ========================================================= -->
        <div id="negaraTujuanPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackNegaraTujuan" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeNegara" class="hover:underline">Home</a> &gt;
                    <span id="breadcrumbCurrentNegara" class="font-semibold">Negara Tujuan</span>
                </nav>

                <!-- Header Halaman -->
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Negara Tujuan Ekspor</h1>
                <p class="text-gray-700 mb-8">Berikut ini informasi syarat mutu dan aturan teknis ekspor berdasarkan negara.</p>

                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Filter Sidebar -->
                    <div class="w-full md:w-1/4 p-6 rounded-lg shadow-md transparent-content-card">
                        <button id="filterSemuaNegara" class="w-full text-left py-2 px-4 rounded-lg bg-blue-600 text-white font-semibold mb-2 hover:bg-blue-700 transition-colors">Semua Negara</button>
                        <ul class="space-y-1">
                            <li><a href="#" id="filterAsia" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">Asia</a></li>
                            <li><a href="#" id="filterUniEropa" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">Uni Eropa</a></li>
                            <li><a href="#" id="filterGcc" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">GCC (Arab Teluk)</a></li>
                            <li><a href="#" id="filterUee" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">UEE (Eurasia)</a></li>
                            <li><a href="#" id="filterLainnya" class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded-lg">Lainnya</a></li>
                        </ul>
                    </div>

                    <!-- Daftar Negara -->
                    <div class="w-full md:w-3/4">
                        <h2 id="daftarNegaraTitle" class="text-xl font-semibold text-gray-800 mb-4">Semua Negara</h2>
                        <div id="daftarNegaraFiltrasi" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Kartu Negara akan dimuat di sini oleh JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Detail Produk Negara -->
        <!-- ========================================================= -->
        <div id="productDetailPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackProductDetail" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeProduct" class="hover:underline">Home</a> &gt;
                    <a href="#" id="breadcrumbNegaraProduct" class="hover:underline">Negara Tujuan</a> &gt;
                    <span id="breadcrumbCurrentProduct" class="font-semibold"></span>
                </nav>

                <!-- Header Halaman Detail Produk -->
                <h1 class="text-3xl font-bold text-gray-800 mb-2" id="detailPageTitle">Produk Ekspor ke Afrika Selatan</h1>
                <p class="text-gray-700 mb-8" id="detailPageSubtext"></p>

                <div id="produkContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <!-- Kartu Produk akan dimuat di sini oleh JavaScript -->
                </div>
            </div>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Persyaratan Ekspor Produk -->
        <!-- ========================================================= -->
        <div id="exportRequirementsPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackExportRequirements" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeReq" class="hover:underline">Home</a> &gt;
                    <a href="#" id="breadcrumbNegaraReq" class="hover:underline">Negara Tujuan</a> &gt;
                    <a href="#" id="breadcrumbProdukReq" class="hover:underline"></a> &gt;
                    <span id="breadcrumbCurrentReq" class="font-semibold"></span>
                </nav>

                <!-- Header Halaman Persyaratan -->
                <div class="flex items-center mb-6">
                    <h1 class="text-3xl font-bold text-gray-800" id="requirementsPageTitle">Ekspor Produk Alat Komunikasi ke Afrika Selatan</h1>
                </div>
                <p class="text-gray-700 mb-8" id="requirementsPageSubtext">Berikut ini informasi persyaratan ekspor terkait produk yang akan diekspor ke <span id="countryNameForReq"></span>.</p>
                
                <!-- Tombol NPPO -->
                <div class="mt-8 mb-8 text-center">
                    <a id="nppoLink" href="#" target="_blank" class="inline-block w-full px-6 py-3 text-white font-semibold bg-green-500 rounded-full hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-400 focus:ring-opacity-50">
                        Kunjungi Website NPPO <span id="nppoCountryName"></span> &rarr;
                    </a>
                </div>

                <div id="requirementsContent" class="text-justify">
                    <!-- Konten persyaratan akan dimuat di sini -->
                    <div class="mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800 mb-3">Regulasi Alat Telekomunikasi di Afrika Selatan</h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Regulasi telekomunikasi di Afrika Selatan adalah bidang yang sangat kompleks dan diserahkan kepada mereka yang melakukannya telah mengadopsinya sebagai spesialisasi.</li>
                            <li>Khususnya, kesadaran akan hak atau kewajiban konsumen dan pemahaman tentang kerangka peraturan untuk interkoneksi dan penyewaan fasilitas akan sangat penting dalam menegosiasikan perjanjian dan tingkat layanan untuk penyediaan layanan komunikasi elektronik.</li>
                            <li>Undang-undang utama Parlemen yang mengatur industri komunikasi elektronik di Afrika Selatan adalah Electronic Communications Act 36 tahun 2005 ("the ECA"), yang telah menggantikan Undang-Undang Telekomunikasi pada tahun 1996 ("Undang-Undang Telekomunikasi") pada 19 Juli 2006. ECA dapat dikategorikan sebagai pro kompetitif undang-undang yang sangat kontras dengan Undang-Undang Telekomunikasi, yang proteksionis dalam upaya melindungi penyedia sambungan telepon tidak bergerak/telepon rumah, Telkom SA Ltd, dari pengaruh persaingan global.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">ECA (Electronic Communications Act) mengatur berbagai jenis masalah, termasuk:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>lisensi,</li>
                            <li>akses,</li>
                            <li>hak infrastruktur,</li>
                            <li>manajemen dan penugasan frekuensi,</li>
                            <li>layanan universal.</li>
                        </ul>
                    </div>
                    <div>
                        <p class="text-gray-700 mb-2">ECA adalah undang-undang yang mengatur antara penyiaran dan telekomunikasi khususnya di wilayah Afrika Selatan.</p>
                        <p class="text-gray-700">Undang-undang lain yang berdampak pada sektor ini meliputi:</p>
                        <!-- Anda bisa menambahkan daftar undang-undang lain di sini jika ada data -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Daftar Produk Ekspor -->
        <!-- ========================================================= -->
        <div id="exportProductListPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackExportProductList" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeProdukList" class="hover:underline">Home</a> &gt;
                    <span id="breadcrumbCurrentProdukList" class="font-semibold">Produk Ekspor</span>
                </nav>

                <!-- Header Halaman -->
                <h1 class="text-3xl font-bold text-gray-800 mb-2" id="productListPageTitle">Semua Produk Ekspor</h1>
                <p class="text-gray-700 mb-8" id="productListPageSubtext">Temukan persyaratan ekspor untuk berbagai jenis produk tumbuhan.</p>

                <div id="allProductsContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <!-- Kartu Produk akan dimuat di sini oleh JavaScript -->
                </div>
            </div>
        </div>

        <!-- ========================================================= -->
        <!-- Halaman Negara-negara Penjual Produk (Baru) -->
        <!-- ========================================================= -->
        <div id="productCountriesPage" class="hidden-page content-page-background">
            <div class="container mx-auto px-4 py-8">
                <!-- Tombol Kembali -->
                <button id="btnBackProductCountries" class="px-4 py-2 mb-4 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Kembali
                </button>
                <!-- Breadcrumbs -->
                <nav class="mb-6 text-sm text-gray-600">
                    <a href="#" id="breadcrumbHomeProductCountries" class="hover:underline">Home</a> &gt;
                    <a href="#" id="breadcrumbProdukListProductCountries" class="hover:underline">Produk Ekspor</a> &gt;
                    <span id="breadcrumbCurrentProductCountries" class="font-semibold"></span>
                </nav>

                <!-- Header Halaman -->
                <h1 class="text-3xl font-bold text-gray-800 mb-2" id="productCountriesPageTitle">Negara Tujuan untuk [Nama Produk]</h1>
                <p class="text-gray-700 mb-8" id="productCountriesPageSubtext">Informasi negara tujuan ekspor.</p>

                <div id="countriesForProductContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Kartu Negara akan dimuat di sini oleh JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================================= -->
    <!-- Footer Halaman -->
    <!-- ========================================================= -->
    <footer class="py-6 mt-12 text-center transparent-footer">
        <p>&copy; 2025 Layanan Informasi Tanaman Ekspor. Hak Cipta Dilindungi.</p>
    </footer>

    <script>
        /* ========================================================= */
        /* Data Aplikasi */
        /* ========================================================= */
        const exportCountriesData = [
            { "negara": "China", "jumlah_produk": 2, "region": "Asia", "nppo_link": "http://www.moa.gov.cn/", "produk_list": [
                {"nama": "Santan Kelapa", "img": "https://wiratech.co.id/wp-content/uploads/2018/11/cara-membuat-santan-kelapa.png", "persyaratan": `
                    <div class="mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800 mb-3">Persyaratan Umum Ekspor Produk Pertanian ke China:</h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Pendaftaran GACC:</strong> Eksportir dan produsen makanan harus terdaftar di Administrasi Umum Kepabeanan Republik Rakyat Tiongkok (GACC).</li>
                            <li><strong>Memenuhi Standar Kesehatan dan Kebersihan:</strong> Produk harus memenuhi standar kesehatan dan kebersihan yang ditetapkan oleh China.</li>
                            <li><strong>Sertifikat Karantina:</strong> Memiliki sertifikat karantina tumbuhan yang dikeluarkan oleh otoritas terkait (Badan Karantina Indonesia), yang membuktikan bahwa produk bebas dari hama dan penyakit.</li>
                            <li><strong>Dokumen Ekspor:</strong> Persiapkan dokumen seperti Surat Keterangan Asal, invoice, packing list, bill of lading, dan dokumen pendukung lainnya.</li>
                            <li><strong>Labeling:</strong> Memenuhi persyaratan pelabelan yang ditetapkan oleh China.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Persyaratan Khusus untuk Santan Kelapa:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Jenis Produk:</strong> Pastikan santan kelapa termasuk dalam daftar produk yang diizinkan untuk diekspor ke China.</li>
                            <li><strong>Inspeksi CIQ:</strong> Produk akan menjalani inspeksi CIQ (China Inspection and Quarantine) untuk memastikan kepatuhan terhadap standar dan persyaratan pelabelan.</li>
                            <li><strong>Perlakuan Karantina Khusus:</strong> Jika diperlukan, produk mungkin memerlukan perlakuan karantina khusus, seperti perlakuan suhu panas atau dingin.</li>
                        </ul>
                    </div>
                `},
                {"nama": "Minyak Kelapa", "img": "https://res.cloudinary.com/dk0z4ums3/image/upload/v1641883391/attached_image/fakta-minyak-kelapa-untuk-rambut-dan-diet.jpg", "persyaratan": `
                    <div class="mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800 mb-3">Pendaftaran Eksportir dan Produk:</h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Pendaftaran GACC:</strong> Produsen, pengolah, dan fasilitas penyimpanan produk pangan yang diekspor ke China harus terdaftar di GACC.</li>
                            <li><strong>Pendaftaran Produsen Luar Negeri:</strong> Produsen makanan di luar China juga perlu mendaftar di GACC, terutama sejak berlakunya Decree 248.</li>
                            <li><strong>Informasi Produk:</strong> Pendaftaran mencakup informasi tentang produk, termasuk HS Code (10 digit) dan CIQ Code (3 digit).</li>
                            <li><strong>Dokumen Pendukung:</strong> Pendaftaran membutuhkan dokumen seperti Nomor Induk Berusaha (NIB) dan dokumen terkait kondisi sarana.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Persyaratan Kualitas dan Keamanan:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Standar Mutu:</strong> Minyak kelapa harus memenuhi standar mutu yang berlaku di China, termasuk standar GB2760-2011 untuk bahan tambahan makanan dan GB14880-2012 jika digunakan untuk meningkatkan komponen nutrisi.</li>
                            <li><strong>Kadar Air:</strong> Kadar air dalam minyak kelapa harus rendah, umumnya kurang dari 0.2%, untuk menjaga kualitas dan daya tahan produk.</li>
                            <li><strong>Asam Lemak:</strong> Kandungan asam lemak dalam minyak kelapa harus seimbang dan sesuai standar internasional.</li>
                            <li><strong>Proses Produksi:</strong> Proses produksi harus memenuhi standar kebersihan dan kualitas yang baik.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Dokumen Ekspor:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Faktur Komersial:</strong> Dokumen yang berisi informasi tentang transaksi penjualan, termasuk harga, jumlah, dan deskripsi produk.</li>
                            <li><strong>Surat Keterangan Asal (COO):</strong> Dokumen yang menyatakan asal produk, yang mungkin diperlukan untuk mendapatkan manfaat dari perjanjian perdagangan preferensial.</li>
                            <li><strong>Daftar Kemasan (Packing List):</strong> Dokumen yang mencantumkan detail kemasan produk.</li>
                            <li><strong>Pemberitahuan Ekspor Barang (PEB):</strong> Dokumen yang diperlukan untuk proses kepabeanan.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Persyaratan Tambahan:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Label Produk:</strong> Label produk harus mencantumkan informasi yang lengkap, termasuk komposisi, tanggal kedaluwarsa, dan nomor registrasi BPOM (jika ada).</li>
                            <li><strong>Pelabelan Produk:</strong> Label harus mencantumkan nomor registrasi GACC atau nomor registrasi yang disetujui oleh otoritas negara pengekspor.</li>
                            <li><strong>Bea Cukai:</strong> Pihak eksportir harus mengurus proses kepabeanan di China.</li>
                            <li><strong>Persetujuan Ekspor (PE):</strong> Untuk komoditas tertentu seperti CPO dan turunannya, diperlukan Persetujuan Ekspor (PE) yang diterbitkan oleh Kementerian Perdagangan.</li>
                        </ul>
                    </div>
                `}
            ]},
            { "negara": "Inggris", "jumlah_produk": 1, "region": "Eropa", "nppo_link": "https://www.gov.uk/government/organisations/department-for-environment-food-rural-affairs", "produk_list": [
                {"nama": "Kelapa Parut", "img": "https://www.static-src.com/wcsstore/Indraprastha/images/catalog/full//97/MTA-67010495/no-brand_kelapa-parut-1-butir_full01.jpg", "persyaratan": `
                    <div class="mb-6">
                        <p class="text-gray-700 mb-4">Berdasarkan peraturan NPPO Inggris, berikut adalah poin-poin informatif mengenai persyaratan ekspor kelapa parut ke Inggris:</p>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">1. Pengecualian Sertifikat Phytosanitary:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Kelapa parut (desiccated coconut) tidak memerlukan sertifikat phytosanitary dari otoritas karantina tumbuhan di negara asal (NPPO Indonesia).</li>
                            <li>Hal ini karena produk kelapa, baik segar maupun kering, dianggap sebagai komoditas dengan risiko rendah terhadap penyebaran hama dan penyakit tanaman.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">2. Persyaratan Utama: Keamanan Pangan & Kualitas:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Meskipun tidak memerlukan sertifikat phytosanitary, produk wajib memenuhi standar keamanan pangan dan kualitas yang ketat dari otoritas Inggris.</li>
                            <li><strong>Keamanan Pangan:</strong> Produk harus bebas dari kontaminan fisik, kimia, dan mikrobiologis (seperti salmonella, E. coli), serta residu pestisida atau logam berat.</li>
                            <li><strong>Kualitas Produk:</strong> Produk harus memenuhi standar kualitas yang ditetapkan, seperti kadar air maksimum 3%, kadar lemak (full-fat atau low-fat), dan tidak mengandung bau atau rasa asing.</li>
                            <li><strong>Labeling:</strong> Label pada kemasan harus informatif, jelas, dan sesuai dengan peraturan yang berlaku di Inggris. Jika menggunakan pengawet (misalnya sulfit), harus dicantumkan pada label karena termasuk alergen.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">3. Prosedur dan Dokumen Impor Lainnya:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Eksportir wajib mendaftar dan menggunakan sistem IPAFFS (Import of Products, Animals, Food and Feed System) untuk memberitahukan impor produk ke Inggris.</li>
                            <li>Siapkan dokumen ekspor lengkap dari Indonesia, seperti Surat Izin Perdagangan, Nomor Pokok Wajib Pajak (NPWP), dan Nota Persetujuan Ekspor (NPE) dari Bea Cukai.</li>
                            <li>Konsinyasi mungkin akan melalui pemeriksaan dokumen dan fisik secara acak di perbatasan Inggris untuk memastikan kepatuhan terhadap peraturan.</li>
                        </ul>
                    </div>
                `}
            ]},
            { "negara": "Rusia", "jumlah_produk": 1, "region": "UEE (Eurasia)", "nppo_link": "https://fsvps.gov.ru/", "produk_list": [
                {"nama": "Kelapa Parut", "img": "https://www.static-src.com/wcsstore/Indraprastha/images/catalog/full//97/MTA-67010495/no-brand_kelapa-parut-1-butir_full01.jpg", "persyaratan": `
                    <div class="mb-6">
                        <p class="text-gray-700 mb-4">Berdasarkan informasi dari NPPO (National Plant Protection Organization) Rusia, persyaratan meliputi:</p>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">1. Sertifikasi Produk:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Sertifikat Kesehatan Tumbuhan (Phytosanitary Certificate):</strong> Ini adalah dokumen utama yang membuktikan bahwa produk kelapa parut Anda bebas dari hama dan penyakit tanaman yang berbahaya, dan memenuhi standar karantina Rusia.</li>
                            <li><strong>Sertifikat Asal Usul:</strong> Dokumen ini diperlukan untuk membuktikan bahwa kelapa parut berasal dari Indonesia dan memenuhi persyaratan preferensi tarif atau aturan asal lainnya.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">2. Persyaratan Karantina:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Pengendalian Hama dan Penyakit:</strong> Kelapa parut harus melalui proses pemeriksaan dan pengobatan yang diperlukan untuk memastikan bebas dari hama dan penyakit yang menjadi perhatian Rusia.</li>
                            <li><strong>Kemasan dan Label:</strong> Kemasan harus memenuhi standar yang ditetapkan oleh Rusia untuk mencegah kontaminasi dan memudahkan proses pemeriksaan. Label harus mencantumkan informasi yang jelas dan lengkap tentang produk, termasuk asal usul, tanggal produksi, dan tanggal kedaluwarsa.</li>
                            <li><strong>Fasilitas Produksi:</strong> Fasilitas produksi kelapa parut harus memenuhi standar sanitasi dan higienis yang ditetapkan oleh Rusia untuk menjaga kualitas dan keamanan produk.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">3. Peraturan Teknis dan Standar:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>TR CU 022/2011:</strong> Regulasi teknis ini menetapkan persyaratan untuk pelabelan produk makanan, termasuk tanggal pembuatan, tanggal kedaluwarsa, dan nama produk.</li>
                            <li><strong>Pedoman Asupan Harian:</strong> Regulasi ini juga mengatur penunjukan nilai energi, protein, lemak, dan karbohidrat dalam produk makanan untuk mencegah tindakan yang menipu konsumen.</li>
                            <li><strong>Persyaratan Khusus:</strong> Rusia mungkin memiliki persyaratan khusus untuk produk kelapa parut tertentu. Penting untuk berkonsultasi dengan pihak berwenang Rusia atau perwakilan perdagangan untuk mendapatkan informasi terbaru dan terperinci.</li>
                        </ul>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">4. Prosedur Ekspor:</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Pendaftaran:</strong> Ekspor kelapa parut memerlukan pendaftaran di instansi terkait di Indonesia, seperti Badan Karantina Indonesia.</li>
                            <li><strong>Pemeriksaan dan Sertifikasi:</strong> Kelapa parut harus melalui pemeriksaan dan sertifikasi oleh pihak berwenang untuk memastikan memenuhi persyaratan ekspor.</li>
                            <li><strong>Pengiriman:</strong> Setelah semua persyaratan terpenuhi, kelapa parut dapat dikirim ke Rusia melalui jalur yang telah ditentukan.</li>
                        </ul>
                    </div>
                `}
            ]},
            { "negara": "Vietnam", "jumlah_produk": 1, "region": "Asia", "nppo_link": "https://www.ppd.gov.vn/", "produk_list": [
                {"nama": "Pala Biji", "img": "https://asset.kompas.com/crops/IH_RV5KbajjARwnu9MUsgds412A=/0x0:1000x667/750x500/data/photo/2020/04/18/5e9b14ab5ec0a.jpg", "persyaratan": `
                    <div class="mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800 mb-3">Persyaratan Ekspor Biji Pala ke Vietnam:</h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Karantina:</strong> Biji pala yang diekspor harus melalui proses karantina untuk memastikan bebas dari hama dan penyakit tumbuhan.</li>
                            <li><strong>Sertifikat Fitosanitari:</strong> Dokumen ini dikeluarkan oleh NPPO (National Plant Protection Organization) negara asal (dalam hal ini, Indonesia) yang menyatakan bahwa produk telah diperiksa dan memenuhi persyaratan fitosanitari yang ditetapkan oleh Vietnam.</li>
                            <li><strong>Pemeriksaan Laboratorium:</strong> Sampel biji pala mungkin perlu diuji di laboratorium untuk mendeteksi keberadaan hama atau penyakit tertentu yang menjadi perhatian Vietnam.</li>
                            <li><strong>Perlakuan:</strong> Beberapa perlakuan mungkin diperlukan untuk memastikan produk bebas dari hama dan penyakit, seperti fumigasi atau perlakuan panas.</li>
                            <li><strong>Pengepakan:</strong> Biji pala harus dikemas dengan cara yang mencegah kontaminasi selama pengangkutan dan penyimpanan.</li>
                            <li><strong>Pelabelan:</strong> Kemasan harus diberi label yang jelas dan akurat, termasuk informasi tentang jenis produk, negara asal, dan informasi lain yang diperlukan.</li>
                            <li><strong>Dokumen Tambahan:</strong> Dokumen tambahan mungkin diperlukan tergantung pada persyaratan khusus yang ditetapkan oleh NPPO Vietnam untuk komoditas biji pala.</li>
                        </ul>
                    </div>
                `}
            ]},
        ];

        /* ========================================================= */
        /* Variabel DOM (Document Object Model) */
        /* ========================================================= */
        const mainPage = document.getElementById('mainPage');
        const negaraTujuanPage = document.getElementById('negaraTujuanPage');
        const productDetailPage = document.getElementById('productDetailPage');
        const exportRequirementsPage = document.getElementById('exportRequirementsPage');
        const exportProductListPage = document.getElementById('exportProductListPage');
        const productCountriesPage = document.getElementById('productCountriesPage');
        const noResultsCard = document.getElementById('noResultsCard'); // Baru: Kartu notifikasi hasil tidak ditemukan


        // Elemen bilah pencarian baru
        const inputPencarianGabungan = document.getElementById('inputPencarianGabungan');
        const tombolCari = document.getElementById('tombolCari');

        // Tombol navigasi utama
        const btnCariNegara = document.getElementById('btnCariNegara');
        const btnCariProduk = document.getElementById('btnCariProduk');

        // Elemen Breadcrumbs
        const breadcrumbHomeNegara = document.getElementById('breadcrumbHomeNegara');
        const breadcrumbHomeProduct = document.getElementById('breadcrumbHomeProduct');
        const breadcrumbNegaraProduct = document.getElementById('breadcrumbNegaraProduct');
        const breadcrumbHomeReq = document.getElementById('breadcrumbHomeReq');
        const breadcrumbNegaraReq = document.getElementById('breadcrumbNegaraReq');
        const breadcrumbProdukReq = document.getElementById('breadcrumbProdukReq');
        const breadcrumbCurrentReq = document.getElementById('breadcrumbCurrentReq');
        const breadcrumbHomeProdukList = document.getElementById('breadcrumbHomeProdukList');
        const breadcrumbHomeProductCountries = document.getElementById('breadcrumbHomeProductCountries');
        const breadcrumbProdukListProductCountries = document.getElementById('breadcrumbProdukListProductCountries');
        const breadcrumbCurrentProductCountries = document.getElementById('breadcrumbCurrentProductCountries');

        // Elemen Halaman Negara Tujuan
        const filterSemuaNegara = document.getElementById('filterSemuaNegara');
        const filterAsia = document.getElementById('filterAsia');
        const filterUniEropa = document.getElementById('filterUniEropa');
        const filterGcc = document.getElementById('filterGcc');
        const filterUee = document.getElementById('filterUee');
        const filterLainnya = document.getElementById('filterLainnya');
        const daftarNegaraFiltrasi = document.getElementById('daftarNegaraFiltrasi');
        const daftarNegaraTitle = document.getElementById('daftarNegaraTitle');

        // Elemen Halaman Detail Produk Negara
        const detailPageTitle = document.getElementById('detailPageTitle');
        const detailPageSubtext = document.getElementById('detailPageSubtext');
        const produkContainer = document.getElementById('produkContainer');

        // Elemen Halaman Persyaratan Ekspor Produk
        const requirementsPageTitle = document.getElementById('requirementsPageTitle');
        const requirementsPageSubtext = document.getElementById('requirementsPageSubtext');
        const requirementsContent = document.getElementById('requirementsContent');
        const nppoLink = document.getElementById('nppoLink');
        const nppoCountryName = document.getElementById('nppoCountryName');
        const countryNameForReq = document.getElementById('countryNameForReq');

        // Elemen Halaman Daftar Produk Ekspor
        const productListPageTitle = document.getElementById('productListPageTitle');
        const productListPageSubtext = document.getElementById('productListPageSubtext');
        const allProductsContainer = document.getElementById('allProductsContainer');

        // Elemen Halaman Negara-negara Penjual Produk
        const productCountriesPageTitle = document.getElementById('productCountriesPageTitle');
        const productCountriesPageSubtext = document.getElementById('productCountriesPageSubtext');
        const countriesForProductContainer = document.getElementById('countriesForProductContainer');

        // New Back Buttons
        const btnBackNegaraTujuan = document.getElementById('btnBackNegaraTujuan');
        const btnBackProductDetail = document.getElementById('btnBackProductDetail');
        const btnBackExportRequirements = document.getElementById('btnBackExportRequirements');
        const btnBackExportProductList = document.getElementById('btnBackExportProductList');
        const btnBackProductCountries = document.getElementById('btnBackProductCountries');

        /* ========================================================= */
        /* Variabel State (Penyimpanan Data Sementara) */
        /* ========================================================= */
        let selectedCountryData = null; // Menyimpan data negara yang dipilih
        let selectedProductForCountriesPage = null; // Menyimpan data produk yang dipilih untuk halaman negara-negara penjual produk
        let selectedProductForRequirements = null; // Menyimpan data produk yang dipilih untuk halaman persyaratan

        /* ========================================================= */
        /* Fungsi Pembantu */
        /* ========================================================= */

        // Data lengkap untuk semua produk unik (untuk halaman daftar produk ekspor)
        const allUniqueProductsData = (() => {
            const productsMap = new Map();
            exportCountriesData.forEach(country => {
                country.produk_list.forEach(product => {
                    if (!productsMap.has(product.nama)) {
                        productsMap.set(product.nama, {
                            nama: product.nama,
                            img: product.img,
                            countries_exporting: new Set()
                        });
                    }
                    productsMap.get(product.nama).countries_exporting.add(country.negara);
                });
            });
            const uniqueProductsArray = Array.from(productsMap.values()).map(product => ({
                ...product,
                countries_exporting_count: product.countries_exporting.size,
                countries_exporting_list: Array.from(product.countries_exporting).sort()
            }));
            return uniqueProductsArray.sort((a, b) => a.nama.localeCompare(b.nama));
        })();

        // Fungsi untuk mendapatkan URL gambar bendera berdasarkan nama negara
        function getCountryImage(countryName) {
            if (countryName === 'China') {
                return 'https://media.istockphoto.com/id/878587072/id/foto/bendera-china-serangkaian-flags-of-the-world.jpg?s=612x612&w=0&k=20&c=2lwE1kiuR1ymTWIwLBNHvqk76Xqp2gIaHnRSSX6fiTc=';
            } else if (countryName === 'Inggris') {
                return 'https://media.istockphoto.com/id/1176177881/id/video/bendera-britania-raya.jpg?s=640x640&k=20&c=FxeS-XXTBA05EonmeuM8bZHIP25O4QAyYN04ew5eE8s=';
            } else if (countryName === 'Rusia') {
                return 'https://media.istockphoto.com/id/489481953/id/foto/bendera-rusia.jpg?s=612x612&w=0&k=20&c=yfQXzJ6yj90V47u4jCm08C7kzOz2zaCdhZsFt8OhgZ8=';
            } else if (countryName === 'Vietnam') {
                return 'https://media.istockphoto.com/id/1398462062/id/vektor/bendera-vietnam.jpg?s=612x612&w=0&k=20&c=DXt0P-FCU2XIXxaZjDEQl5tIDKdNLYFTGWpxr-HRDVM=';
            }
            else {
                const countryCode = countryName.substring(0, 2).toUpperCase(); 
                return `https://placehold.co/150x120/CCCCCC/666666?text=${countryCode}`;
            }
        }

        // Fungsi untuk mengkonversi string menjadi slug URL-friendly
        function slugify(text) {
            return text.toString().toLowerCase()
                .replace(/\s+/g, '-')           // Ganti spasi dengan tanda hubung
                .replace(/[^\w-]+/g, '')       // Hapus semua non-word chars
                .replace(/--+/g, '-')          // Ganti multiple dashes dengan single dash
                .replace(/^-+/, '')            // Trim dashes from start of text
                .replace(/-+$/, '');           // Trim dashes from end of text
        }

        // Fungsi untuk menyembunyikan semua halaman
        function _hideAllPages() {
            mainPage.classList.add('hidden-page');
            negaraTujuanPage.classList.add('hidden-page');
            productDetailPage.classList.add('hidden-page');
            exportRequirementsPage.classList.add('hidden-page');
            exportProductListPage.classList.add('hidden-page');
            productCountriesPage.classList.add('hidden-page');
            noResultsCard.classList.add('hidden', 'opacity-0'); // Sembunyikan notifikasi juga
            noResultsCard.classList.remove('visible'); // Hapus kelas visible jika ada
        }

        // Fungsi untuk parsing query parameters dari string hash
        function getQueryParams(url) {
            const params = {};
            const queryString = url.split('?')[1];
            if (queryString) {
                queryString.split('&').forEach(param => {
                    const [key, value] = param.split('=');
                    params[decodeURIComponent(key)] = decodeURIComponent(value || '');
                });
            }
            return params;
        }

        /* ========================================================= */
        /* Fungsi Render Halaman */
        /* ========================================================= */

        // Fungsi untuk merender halaman utama
        function renderMainPage() {
            _hideAllPages();
            mainPage.classList.remove('hidden-page');
            if (inputPencarianGabungan) inputPencarianGabungan.value = '';
            document.title = "Lintanx. Layanan Informasi Tumbuhan Ekspor";
        }

        // Fungsi untuk merender halaman negara tujuan
        function renderNegaraTujuanPage(activeFilterRegion = 'Semua Negara', searchTerm = null) {
            _hideAllPages();
            negaraTujuanPage.classList.remove('hidden-page');

            let countriesToDisplay = exportCountriesData;
            if (searchTerm) {
                countriesToDisplay = exportCountriesData.filter(country =>
                    country.negara.toLowerCase().includes(searchTerm.toLowerCase())
                );
                filterAndRenderCountries('Hasil Pencarian', countriesToDisplay);
            } else {
                filterAndRenderCountries(activeFilterRegion, countriesToDisplay);
            }
            document.title = "Negara Tujuan Ekspor - Lintanx";
        }

        // Fungsi untuk merender halaman detail produk untuk negara tertentu
        function renderProductDetailPage(countrySlug) {
            _hideAllPages();
            productDetailPage.classList.remove('hidden-page');

            selectedCountryData = exportCountriesData.find(country => slugify(country.negara) === countrySlug);

            if (selectedCountryData) {
                detailPageTitle.textContent = `Produk Ekspor ke ${selectedCountryData.negara}`;
                detailPageSubtext.textContent = ``;
                breadcrumbCurrentProduct.textContent = selectedCountryData.negara;
                renderProducts(selectedCountryData.produk_list, selectedCountryData.negara);
                document.title = `Produk Ekspor ke ${selectedCountryData.negara} - Lintanx`;
            } else {
                console.error("Data negara tidak ditemukan:", countrySlug);
                navigateTo('#/'); // Redirect ke halaman utama jika data tidak ditemukan
            }
        }

        // Fungsi untuk merender halaman daftar semua produk ekspor
        function renderExportProductListPage(searchTerm = null) {
            _hideAllPages();
            exportProductListPage.classList.remove('hidden-page');

            let productsToDisplay = allUniqueProductsData;
            if (searchTerm) {
                productsToDisplay = allUniqueProductsData.filter(product =>
                    product.nama.toLowerCase().includes(searchTerm.toLowerCase())
                );
                productListPageTitle.textContent = `Hasil Pencarian Produk untuk "${searchTerm}"`;
                productListPageSubtext.textContent = `Menampilkan ${productsToDisplay.length} hasil.`;
            } else {
                productListPageTitle.textContent = "Semua Produk Ekspor";
                productListPageSubtext.textContent = "Temukan persyaratan ekspor untuk berbagai jenis produk tumbuhan.";
            }

            renderAllProducts(productsToDisplay);
            document.title = "Semua Produk Ekspor - Lintanx";
        }

        // Fungsi baru: untuk merender halaman negara-negara penjual produk tertentu
        function renderProductCountriesPage(productSlug) {
            _hideAllPages();
            productCountriesPage.classList.remove('hidden-page');

            selectedProductForCountriesPage = allUniqueProductsData.find(p => slugify(p.nama) === productSlug);

            if (selectedProductForCountriesPage) {
                productCountriesPageTitle.textContent = `Negara Tujuan untuk ${selectedProductForCountriesPage.nama}`;
                productCountriesPageSubtext.textContent = `Informasi negara tujuan ekspor.` + ` Produk: ${selectedProductForCountriesPage.nama}`;
                breadcrumbCurrentProductCountries.textContent = selectedProductForCountriesPage.nama;

                renderCountriesForProduct(selectedProductForCountriesPage.countries_exporting_list, selectedProductForCountriesPage.nama);
                document.title = `Negara Tujuan untuk ${selectedProductForCountriesPage.nama} - Lintanx`;
            } else {
                console.error("Data produk tidak ditemukan:", productSlug);
                navigateTo('#/'); // Redirect ke halaman utama jika data tidak ditemukan
            }
        }

        // Fungsi untuk merender halaman persyaratan ekspor untuk produk dan negara spesifik
        function renderExportRequirementsPage(countrySlug, productSlug) {
            _hideAllPages();
            exportRequirementsPage.classList.remove('hidden-page');

            const country = exportCountriesData.find(c => slugify(c.negara) === countrySlug);
            const product = country ? country.produk_list.find(p => slugify(p.nama) === productSlug) : null;

            if (country && product) {
                selectedProductForRequirements = product;
                selectedCountryData = country;

                requirementsPageTitle.textContent = `Ekspor Produk ${product.nama} ke ${country.negara}`;
                requirementsPageSubtext.innerHTML = `Berikut ini informasi persyaratan ekspor terkait produk yang akan diekspor ke <span id="countryNameForReq">${country.negara}</span>.`;

                requirementsContent.innerHTML = product.persyaratan || '<p class="text-gray-600">Tidak ada persyaratan spesifik yang tersedia untuk produk ini.</p>';

                if (country.nppo_link) {
                    nppoLink.href = country.nppo_link;
                    nppoCountryName.textContent = country.negara;
                    nppoLink.classList.remove('hidden');
                } else {
                    nppoLink.href = "#";
                    nppoCountryName.textContent = "";
                    nppoLink.classList.add('hidden');
                }

                breadcrumbProdukReq.textContent = product.nama;
                breadcrumbNegaraReq.textContent = country.negara;
                breadcrumbCurrentReq.textContent = `Persyaratan`;
                document.title = `Persyaratan Ekspor ${product.nama} ke ${country.negara} - Lintanx`;
            } else {
                console.error("Data negara atau produk tidak ditemukan:", countrySlug, productSlug);
                navigateTo('#/'); // Redirect ke halaman utama jika data tidak ditemukan
            }
        }

        /* ========================================================= */
        /* Fungsi Render Konten Dinamis (dipanggil oleh fungsi render halaman) */
        /* ========================================================= */

        // Merender (menampilkan) kartu negara
        function renderCountries(countriesToDisplay, title) {
            daftarNegaraFiltrasi.innerHTML = '';
            daftarNegaraTitle.textContent = title;

            if (countriesToDisplay.length === 0) {
                daftarNegaraFiltrasi.innerHTML = '<p class="text-gray-600 col-span-full">Tidak ada negara yang ditemukan untuk wilayah ini.</p>';
                return;
            }

            countriesToDisplay.forEach(country => {
                const countryImage = getCountryImage(country.negara);

                const countryCard = document.createElement('div');
                countryCard.className = 'p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden transparent-content-card';
                countryCard.innerHTML = `
                    <img src="${countryImage}" alt="Gambar untuk ${country.negara}" class="product-card-image">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-gray-800 mb-1">${country.negara}</h3>
                    </div>
                `;
                countryCard.addEventListener('click', () => {
                    navigateTo(`#/negara-tujuan/${slugify(country.negara)}`);
                });
                daftarNegaraFiltrasi.appendChild(countryCard);
            });
        }

        // Merender (menampilkan) kartu produk (di halaman Detail Produk Negara)
        function renderProducts(productsToDisplay, countryName) {
            produkContainer.innerHTML = '';

            if (productsToDisplay.length === 0) {
                produkContainer.innerHTML = '<p class="text-gray-600 col-span-full">Tidak ada produk yang ditemukan untuk negara ini.</p>';
                return;
            }

            productsToDisplay.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden transparent-content-card';
                productCard.innerHTML = `
                    <img src="${product.img}" alt="${product.nama}" class="product-card-image">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-gray-800 mb-1">${product.nama}</h3>
                        <a href="#" class="text-sm text-blue-600 hover:underline mt-2 block product-link"
                           data-country="${countryName}" data-product="${product.nama}">Informasi Lebih Lanjut ></a>
                    </div>
                `;
                produkContainer.appendChild(productCard);
            });

            document.querySelectorAll('.product-link').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const country = event.target.dataset.country;
                    const product = event.target.dataset.product;
                    navigateTo(`#/persyaratan/${slugify(country)}/${slugify(product)}`);
                });
            });
        }

        // Merender (menampilkan) semua kartu produk unik (di halaman Daftar Produk Ekspor)
        function renderAllProducts(productsToDisplay) {
            allProductsContainer.innerHTML = '';

            if (productsToDisplay.length === 0) {
                allProductsContainer.innerHTML = '<p class="text-gray-600 col-span-full">Tidak ada produk yang ditemukan.</p>';
                return;
            }

            productsToDisplay.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden transparent-content-card';
                productCard.innerHTML = `
                    <img src="${product.img}" alt="${product.nama}" class="product-card-image">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-gray-800 mb-1">${product.nama}</h3>
                        <a href="#" class="text-sm text-blue-600 hover:underline mt-2 block product-list-link"
                           data-product="${product.nama}">Lihat Negara Tujuan ></a>
                    </div>
                `;
                allProductsContainer.appendChild(productCard);
            });

            document.querySelectorAll('.product-list-link').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const productName = event.target.dataset.product;
                    navigateTo(`#/produk-ekspor/${slugify(productName)}`);
                });
            });
        }

        // Merender (menampilkan) kartu negara untuk produk tertentu
        function renderCountriesForProduct(countryNames, productName) {
            countriesForProductContainer.innerHTML = '';

            if (countryNames.length === 0) {
                countriesForProductContainer.innerHTML = `<p class="text-gray-600 col-span-full">Tidak ada negara yang mengekspor produk ${productName}.</p>`;
                return;
            }

            countryNames.forEach(countryName => {
                const countryImage = getCountryImage(countryName);

                const countryCard = document.createElement('div');
                countryCard.className = 'p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer overflow-hidden transparent-content-card';
                countryCard.innerHTML = `
                    <img src="${countryImage}" alt="Gambar untuk ${countryName}" class="product-card-image">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-gray-800 mb-1">${countryName}</h3>
                    </div>
                `;
                countryCard.addEventListener('click', () => {
                    navigateTo(`#/persyaratan/${slugify(countryName)}/${slugify(productName)}`);
                });
                countriesForProductContainer.appendChild(countryCard);
            });
        }

        // Fungsi untuk memfilter dan merender negara berdasarkan wilayah
        function filterAndRenderCountries(region, dataToUse = exportCountriesData) {
            let filteredCountries = [];
            let displayTitle = '';

            document.querySelectorAll('#negaraTujuanPage button, #negaraTujuanPage ul a').forEach(el => {
                el.classList.remove('filter-active', 'bg-blue-600', 'text-white', 'font-semibold');
                if (el.tagName === 'A') {
                    el.classList.add('text-gray-700');
                    el.classList.remove('hover:bg-blue-600');
                    el.classList.add('hover:bg-gray-100');
                }
            });

            if (region === 'Semua Negara') {
                filteredCountries = dataToUse;
                displayTitle = 'Semua Negara';
                filterSemuaNegara.classList.add('filter-active', 'bg-blue-600', 'text-white', 'font-semibold');
            } else if (region === 'Hasil Pencarian') {
                filteredCountries = dataToUse;
                displayTitle = 'Hasil Pencarian Negara';
            }
            else {
                if (region === 'Lainnya') {
                    const knownRegions = ['Asia', 'Uni Eropa', 'GCC (Arab Teluk)', 'UEE (Eurasia)', 'Amerika Utara', 'Amerika Selatan', 'Afrika', 'Eropa'];
                    filteredCountries = dataToUse.filter(country => !knownRegions.includes(country.region));
                } else {
                    filteredCountries = dataToUse.filter(country => country.region === region);
                }
                displayTitle = `Negara di ${region}`;

                const activeFilterElement = document.getElementById(`filter${region.replace(/ /g, '').replace(/\(.*\)/, '')}`);
                if (activeFilterElement) {
                    activeFilterElement.classList.add('filter-active', 'bg-blue-600', 'text-white', 'font-semibold');
                    activeFilterElement.classList.remove('text-gray-700', 'hover:bg-gray-100');
                    activeFilterElement.classList.add('hover:bg-blue-700');
                }
            }
            renderCountries(filteredCountries, displayTitle);
        }

        // Fungsi untuk melakukan pencarian dari bilah pencarian utama
        function lakukanPencarian() {
            const searchTerm = inputPencarianGabungan.value.toLowerCase().trim();

            if (!searchTerm) {
                navigateTo('#/');
                return;
            }

            let foundCountryMatch = false;
            let foundProductMatch = false;

            // Prioritas: Cari negara terlebih dahulu
            let filteredCountries = exportCountriesData.filter(country =>
                country.negara.toLowerCase().includes(searchTerm)
            );
            if (filteredCountries.length > 0) {
                foundCountryMatch = true;
                if (filteredCountries.length === 1 && slugify(filteredCountries[0].negara) === slugify(searchTerm)) {
                    navigateTo(`#/negara-tujuan/${slugify(filteredCountries[0].negara)}`);
                } else {
                    navigateTo('#/negara-tujuan', { search: searchTerm });
                }
            }

            // Jika tidak ada negara yang cocok, cari produk
            if (!foundCountryMatch) {
                let filteredProducts = allUniqueProductsData.filter(product =>
                    product.nama.toLowerCase().includes(searchTerm)
                );
                if (filteredProducts.length > 0) {
                    foundProductMatch = true;
                    if (filteredProducts.length === 1 && slugify(filteredProducts[0].nama) === slugify(searchTerm)) {
                        navigateTo(`#/produk-ekspor/${slugify(filteredProducts[0].nama)}`);
                    } else {
                        navigateTo('#/produk-ekspor', { search: searchTerm });
                    }
                }
            }
            
            // Jika tidak ada hasil, tampilkan notifikasi
            if (!foundCountryMatch && !foundProductMatch) {
                noResultsCard.classList.remove('hidden');
                noResultsCard.classList.add('visible'); // Tambahkan kelas visible untuk animasi fade in
                setTimeout(() => {
                    noResultsCard.classList.remove('visible'); // Hapus kelas visible untuk animasi fade out
                    noResultsCard.classList.add('hidden'); // Sembunyikan setelah animasi selesai
                }, 3000); // Sembunyikan setelah 3 detik
            }
            inputPencarianGabungan.value = ''; // Kosongkan input setelah pencarian
        }

        /* ========================================================= */
        /* Routing dan Navigasi Berbasis Hash */
        /* ========================================================= */

        // Fungsi utama untuk mengubah URL hash dan memicu handleLocation
        function navigateTo(path, params = {}) {
            let urlHash = path;
            const queryParts = [];

            // Tambahkan parameter ke hash jika ada
            for (const key in params) {
                queryParts.push(`${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`);
            }

            if (queryParts.length > 0) {
                urlHash += `?${queryParts.join('&')}`;
            }
            
            // Cek apakah hash sudah sama, jika ya, panggil langsung handleLocation
            if (window.location.hash === urlHash) {
                handleLocation();
            } else {
                window.location.hash = urlHash; // Ini akan memicu event 'hashchange'
            }
        }

        // Objek rute yang memetakan path (setelah #) ke fungsi render
        const routes = {
            '/': renderMainPage,
            '/negara-tujuan': renderNegaraTujuanPage,
            '/produk-ekspor': renderExportProductListPage,
            '/negara-tujuan/:countrySlug': renderProductDetailPage,
            '/produk-ekspor/:productSlug': renderProductCountriesPage,
            '/persyaratan/:countrySlug/:productSlug': renderExportRequirementsPage,
        };

        // Fungsi untuk menangani perubahan lokasi (URL hash)
        function handleLocation() {
            let fullHashPath = window.location.hash.substring(1) || '/';
            let pathWithoutQuery = fullHashPath.split('?')[0];
            
            if (pathWithoutQuery.length > 1 && pathWithoutQuery.endsWith('/')) {
                pathWithoutQuery = pathWithoutQuery.slice(0, -1);
            }

            const queryParams = getQueryParams(fullHashPath);

            let matchedRoute = null;
            let routeParams = {};

            for (const routePath in routes) {
                const routeParts = routePath.split('/').filter(p => p.length > 0);
                const pathParts = fullHashPath.split('?')[0].split('/').filter(p => p.length > 0);


                if (routePath === '/') {
                    if (pathParts.length === 0) {
                        matchedRoute = routes[routePath];
                        routeParams = {};
                        break;
                    }
                    continue;
                }
                
                if (routeParts.length !== pathParts.length) {
                    continue;
                }

                let match = true;
                let currentParams = {};

                for (let i = 0; i < routeParts.length; i++) {
                    const routePart = routeParts[i];
                    const pathPart = pathParts[i];

                    if (routePart.startsWith(':')) {
                        currentParams[routePart.substring(1)] = pathPart;
                    } else if (routePart !== pathPart) {
                        match = false;
                        break;
                    }
                }

                if (match) {
                    matchedRoute = routes[routePath];
                    routeParams = currentParams;
                    break;
                }
            }

            if (matchedRoute) {
                // Sembunyikan kartu notifikasi jika navigasi berhasil
                noResultsCard.classList.add('hidden', 'opacity-0');
                noResultsCard.classList.remove('visible');

                if (pathWithoutQuery === '/negara-tujuan') {
                    const region = queryParams.region || 'Semua Negara';
                    const searchTerm = queryParams.search || null;
                    renderNegaraTujuanPage(region, searchTerm);
                } else if (pathWithoutQuery === '/produk-ekspor') {
                    const searchTerm = queryParams.search || null;
                    renderExportProductListPage(searchTerm);
                } else if (pathWithoutQuery.startsWith('/negara-tujuan/')) {
                    renderProductDetailPage(routeParams.countrySlug);
                } else if (pathWithoutQuery.startsWith('/produk-ekspor/')) {
                    renderProductCountriesPage(routeParams.productSlug);
                } else if (pathWithoutQuery.startsWith('/persyaratan/')) {
                    renderExportRequirementsPage(routeParams.countrySlug, routeParams.productSlug);
                }
                else {
                    matchedRoute();
                }
            } else {
                console.warn("Tidak ada rute yang cocok untuk:", fullHashPath);
                navigateTo('#/'); // Alihkan ke halaman utama jika rute tidak cocok
            }
        }

        /* ========================================================= */
        /* Event Listeners */
        /* ========================================================= */
        // Tangani perubahan lokasi saat tombol back/forward browser digunakan
        window.addEventListener('hashchange', handleLocation);

        // Panggil handleLocation saat halaman pertama kali dimuat
        document.addEventListener('DOMContentLoaded', () => {
            if (!window.location.hash) {
                window.location.hash = '#/';
            } else {
                handleLocation();
            }

            // Event listener untuk tombol cari di bilah pencarian utama
            if (tombolCari) {
                tombolCari.addEventListener('click', lakukanPencarian);
            }
            if (inputPencarianGabungan) {
                inputPencarianGabungan.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        lakukanPencarian();
                    }
                });
            }

            // Navigasi utama (tombol "Lihat Semua Negara" dan "Lihat Semua Produk")
            if (btnCariNegara) {
                btnCariNegara.addEventListener('click', () => {
                    navigateTo('#/negara-tujuan');
                });
            }
            if (btnCariProduk) {
                btnCariProduk.addEventListener('click', () => {
                    navigateTo('#/produk-ekspor');
                });
            }

            // Breadcrumbs - Sekarang menggunakan navigateTo dengan hash
            if (breadcrumbHomeNegara) {
                breadcrumbHomeNegara.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/'); });
            }
            if (breadcrumbHomeProduct) {
                breadcrumbHomeProduct.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/'); });
            }
            if (breadcrumbNegaraProduct) {
                breadcrumbNegaraProduct.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/negara-tujuan'); });
            }
            if (breadcrumbHomeReq) {
                breadcrumbHomeReq.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/'); });
            }
            if (breadcrumbNegaraReq) {
                breadcrumbNegaraReq.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/negara-tujuan'); });
            }
            if (breadcrumbProdukReq) {
                breadcrumbProdukReq.addEventListener('click', (event) => {
                    event.preventDefault();
                    const currentHash = window.location.hash;
                    if (currentHash.includes('/persyaratan/')) {
                        const parts = currentHash.split('/');
                        if (parts.length >= 3) {
                            const countrySlug = parts[2];
                            navigateTo(`#/negara-tujuan/${countrySlug}`);
                        } else {
                            navigateTo('#/produk-ekspor');
                        }
                    } else {
                        navigateTo('#/produk-ekspor');
                    }
                });
            }
            if (breadcrumbHomeProdukList) {
                breadcrumbHomeProdukList.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/'); });
            }
            if (breadcrumbHomeProductCountries) {
                breadcrumbHomeProductCountries.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/'); });
            }
            if (breadcrumbProdukListProductCountries) {
                breadcrumbProdukListProductCountries.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/produk-ekspor'); });
            }

            // Filter wilayah
            if (filterSemuaNegara) filterSemuaNegara.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/negara-tujuan', { region: 'Semua Negara' }); });
            if (filterAsia) filterAsia.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/negara-tujuan', { region: 'Asia' }); });
            if (filterUniEropa) filterUniEropa.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/negara-tujuan', { region: 'Uni Eropa' }); });
            if (filterGcc) filterGcc.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/negara-tujuan', { region: 'GCC (Arab Teluk)' }); });
            if (filterUee) filterUee.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/negara-tujuan', { region: 'UEE (Eurasia)' }); });
            if (filterLainnya) filterLainnya.addEventListener('click', (event) => { event.preventDefault(); navigateTo('#/negara-tujuan', { region: 'Lainnya' }); });

            // Back Buttons - Sekarang menggunakan history.back()
            if (btnBackNegaraTujuan) {
                btnBackNegaraTujuan.addEventListener('click', () => { history.back(); });
            }
            if (btnBackProductDetail) {
                btnBackProductDetail.addEventListener('click', () => { history.back(); });
            }
            if (btnBackExportRequirements) {
                btnBackExportRequirements.addEventListener('click', () => { history.back(); });
            }
            if (btnBackExportProductList) {
                btnBackExportProductList.addEventListener('click', () => { history.back(); });
            }
            if (btnBackProductCountries) {
                btnBackProductCountries.addEventListener('click', () => { history.back(); });
            }
        });
    </script>
</body>
</html>
